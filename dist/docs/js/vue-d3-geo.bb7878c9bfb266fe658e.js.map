{"version":3,"sources":["webpack:///docs/js/vue-d3-geo.bb7878c9bfb266fe658e.js","webpack:///./src/components/D3GeoDoubleLayer.vue?9b69","webpack:///./src/utils/findprop.js","webpack:///./src/components/D3GeoStatic.vue?a7da","webpack:///D3GeoDoubleLayer.vue","webpack:///D3GeoStatic.vue","webpack:///./src/components/D3GeoDoubleLayer.vue?1989","webpack:///./src/components/D3GeoStatic.vue?d3fe"],"names":["webpackJsonp","module","exports","__webpack_require__","injectStyle","ssrContext","Component","__webpack_exports__","obj","path","i","l","args","split","length","hasOwnProperty","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_d3__","__WEBPACK_IMPORTED_MODULE_1_topojson__","n","__WEBPACK_IMPORTED_MODULE_2__utils_findprop__","props","id","type","String","required","topojsonPath","width","Number","default","height","colorRange","center","scale","layer1Objects","layer2Objects","layer1FeatureName","layer1FeatureCode","layer2FeatureName","layer2FeatureCode","layer1EventData","layer2EventData","layer1EventCountTag","layer1LegendTitle","onReceiveEvents","onStopEvents","name","data","legendWidth","gLayer1","mounted","reset","active","classed","g","transition","duration","style","attr","gLabelLayer1","selectAll","gLayer2","vm","$emit","this","svg","$el","append","on","gLabelLayer2","projection","mercator","translate","commonGrads","circleGrads","d","countPoints","getCountPoints","countScale","getCountScale","enter","node","getBBox","Math","min","legendsvg","text","xAxis","getXAxis","call","error","json","layer1Featues","objects","features","layer2Featues","meshLayer1","a","b","initColor","hgrads","grads","mouseoverLayer1","p","mouseoutLayer1","layer2Clicked","mouseoverLayer2","mouseoutLayer2","centroid","layer1Clicked","datum","getAttribute","zoom","bounds","dx","dy","x","y","max","filter","watch","newData","oldData","visualizeLayer1Events","methods","eventList","events","maxCount","colorScale","getColorScale","remove","featureCode","element","sortValue","linear","domain","range","size","countRange","push","xScale","axis","orient","ticks","layerObjects","layerFeatureName","layerFeatureCode","featureNameStyle","gLayer","gLabelLayer","console","log","layerFeatues","mesh","color","interpolate","mouseover","mouseout","__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__","__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default","__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__","__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default","render","_vm","_h","$createElement","_self","_c","staticRenderFns"],"mappings":"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","file":"docs/js/vue-d3-geo.bb7878c9bfb266fe658e.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(15)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(10),\n  /* template */\n  __webpack_require__(21),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (obj, path) {\n\n    var args = path.split('.'),\n        i,\n        l;\n\n    for (i = 0, l = args.length; i < l; i++) {\n        if (!obj.hasOwnProperty(args[i])) return;\n        obj = obj[args[i]];\n    }\n\n    return obj;\n});\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(16)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(11),\n  /* template */\n  __webpack_require__(22),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 8 */,\n/* 9 */,\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_topojson__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_findprop__ = __webpack_require__(3);\n//\n//\n//\n//\n//\n\n\n\n\n\nvar props = {\n  id: {\n    type: String,\n    required: true\n  },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#e3f2fd,#2196f3,#0d47a1'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layer1Objects: {\n    type: String,\n    default: 'districts'\n  },\n  layer2Objects: {\n    type: String,\n    default: 'blocks'\n  },\n  layer1FeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layer1FeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  layer2FeatureName: {\n    type: String,\n    default: 'properties.block'\n  },\n  layer2FeatureCode: {\n    type: String,\n    default: 'properties.block_code'\n  },\n  layer1EventData: {\n    type: Object,\n    default: null\n  },\n  layer2EventData: {\n    type: String,\n    default: 'circleData'\n  },\n  layer1EventCountTag: {\n    type: String,\n    default: 'dropoffCount'\n  },\n  layer1LegendTitle: {\n    type: String,\n    default: '３０分以内の降車イベント'\n  },\n  onReceiveEvents: {\n    type: String,\n    default: 'subTaxiEventsFrom'\n  },\n  onStopEvents: {\n    type: String,\n    default: 'unsubTaxiEvents'\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'd3-geo-double-layer',\n  data: function data() {\n    return {\n      legendWidth: 0,\n      gLayer1: function gLayer1() {\n        return {};\n      }\n    };\n  },\n\n  props: props,\n  mounted: function mounted() {\n    var width = this.width;\n    var height = this.height;\n    var layer1Objects = this.layer1Objects;\n    var layer2Objects = this.layer2Objects;\n    var colorRange = this.colorRange;\n    var layer1FeatureCode = this.layer1FeatureCode;\n    var layer1FeatureName = this.layer1FeatureName;\n    var layer2FeatureCode = this.layer2FeatureCode;\n    var layer2FeatureName = this.layer2FeatureName;\n    var layer1LegendTitle = this.layer1LegendTitle;\n    var onReceiveEvents = this.onReceiveEvents;\n    var onStopEvents = this.onStopEvents;\n    var vm = this;\n\n    var svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this.$el).append('svg').attr('width', width).attr('height', height);\n\n    svg.append(\"rect\").attr(\"class\", \"background\").attr(\"width\", width).attr(\"height\", height).on(\"click\", reset);\n\n    var g = svg.append('g');\n    var gLayer2 = g.append(\"g\").attr(\"id\", \"layer2\");\n    var gLayer1 = g.append(\"g\").attr(\"id\", \"layer1\");\n    // console.log(\"gLayer1\", gLayer1);\n    // this.gLayer1 = gLayer1;\n    // console.log(\"this.gLayer1\", this.gLayer1);\n    var gLabelLayer2 = g.append(\"g\").attr(\"id\", \"layer2_label\");\n    var gLabelLayer1 = g.append(\"g\").attr(\"id\", \"layer1_label\");\n\n    var projection = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].mercator().center(this.center.split(\",\")).scale(this.scale).translate([width / 2, height / 2]);\n\n    var path = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].path().projection(projection);\n\n    ///////////////////////////////////////////////////////////////////////////\n    ///////////////// adding common static gradients //////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    var commonGrads = g.append(\"defs\").attr(\"id\", \"common_grads_def\");\n\n    var circleGrads = commonGrads.append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", \"circleGrad1\");\n\n    circleGrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n    circleGrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d) {\n      return \"orange\";\n    }).style(\"stop-opacity\", \".6\");\n\n    ///////////////////////////////////////////////////////////////////////////\n    //////////////// Adding the initial gradient for the legend ///////////////\n    ///////////////////////////////////////////////////////////////////////////\n    var countPoints = this.getCountPoints(1, width, 10);\n    var countScale = this.getCountScale(1, width);\n\n    //Create the linearGradient\n    commonGrads.append(\"linearGradient\").attr(\"id\", \"legend-traffic\").attr(\"x1\", \"0%\").attr(\"y1\", \"0%\").attr(\"x2\", \"100%\").attr(\"y2\", \"0%\").selectAll(\"stop\").data(__WEBPACK_IMPORTED_MODULE_0_d3__[\"range\"](10)).enter().append(\"stop\").attr(\"offset\", function (d, i) {\n      return countScale(countPoints[i]) / width;\n    }).attr(\"stop-color\", function (d, i) {\n      return colorRange.split(\",\")[0];\n    });\n\n    ///////////////////////////////////////////////////////////////////////////\n    ////////////////////////// Draw the init legend ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n\n    var gBox = g.node().getBBox();\n\n    this.legendWidth = Math.min(width * 0.8, 600);\n    //Color Legend container\n    var legendsvg = g.append(\"g\").attr(\"id\", \"legendWrapper\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height * 0.95 + \")\");\n\n    //Draw the Rectangle\n    legendsvg.append(\"rect\").attr(\"id\", \"legendRect\").attr(\"x\", -this.legendWidth / 2).attr(\"y\", 0).attr(\"width\", this.legendWidth).attr(\"height\", 10).style(\"fill\", \"url(#legend-traffic)\");\n\n    //Append title\n    legendsvg.append(\"text\").attr(\"class\", \"layer1LegendTitle\").attr(\"x\", 0).attr(\"y\", -10).style(\"text-anchor\", \"middle\").text(layer1LegendTitle);\n\n    //Define x-axis\n    var xAxis = this.getXAxis(this.legendWidth, 0);\n\n    //Set up X axis\n    legendsvg.append(\"g\").attr(\"id\", \"axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").call(xAxis);\n\n    // console.log(\"this.topojsonPath:\", this.topojsonPath);\n\n    __WEBPACK_IMPORTED_MODULE_0_d3__[\"json\"](this.topojsonPath, function (error, json) {\n      var vm = this;\n\n      var layer1Featues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[layer1Objects]).features;\n      var layer2Featues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[layer2Objects]).features;\n      var meshLayer1 = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"mesh\"](json, json.objects[layer1Objects], function (a, b) {\n        return a !== b;\n      });\n\n      var initColor = colorRange.split(\",\")[0];\n\n      // fill color gradient process\n      var hgrads = g.append(\"defs\").attr(\"id\", \"layer1_hgrads\").selectAll(\"radialGradient\").data(layer1Featues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"100%\").attr(\"id\", function (d, i) {\n\n        return \"hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n        // return \"hgrad\" + (i + 1);\n      });\n\n      hgrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n      hgrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \"1\");\n\n      var grads = g.append(\"defs\").attr(\"id\", \"layer1_grads\").selectAll(\"radialGradient\").data(layer1Featues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", function (d, i) {\n        return \"grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n        // return \"grad\" + (i + 1);\n      });\n\n      grads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \".7\");\n\n      grads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \"1\");\n\n      var mouseoverLayer1 = function mouseoverLayer1(p) {\n        __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n          return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n        });\n      };\n\n      var mouseoutLayer1 = function mouseoutLayer1(p) {\n        __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n          return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n        });\n      };\n\n      // layer2 polygons and boundary\n      gLayer2.selectAll(\"path\").data(layer2Featues).enter().append(\"path\").attr(\"d\", path).attr(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n        // return \"#bbdefb\";\n      }).style(\"fill-opacity\", 0).style(\"display\", \"none\").attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n      }).attr(\"layer1-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureName);\n      }).attr(\"layer2-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureCode);\n      }).attr(\"layer2-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureName);\n      }).attr(\"class\", \"layer2\").on(\"click\", layer2Clicked).on(\"mouseover\", mouseoverLayer2).on(\"mouseout\", mouseoutLayer2);\n\n      // Layer2 labels\n      gLabelLayer2.selectAll(\"text\").data(layer2Featues).enter().append(\"text\").attr(\"class\", \"label\").style(\"fill-opacity\", 0).style(\"display\", \"none\").attr(\"transform\", function (d) {\n        return \"translate(\" + path.centroid(d) + \")\";\n      }).attr(\"dy\", \".35em\").attr(\"pointer-events\", \"none\").text(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureName);\n      }).attr(\"layer2-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureCode);\n      });\n\n      // Layer1 polygons\n      // console.log(\"vm.gLayer1!!!!!!!!!!\", vm.gLayer1);\n      gLayer1.selectAll(\"path\").data(layer1Featues).enter().append(\"path\").attr(\"class\", \"layer1\").attr(\"d\", path).style(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n      }).attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n      }).attr(\"layer1-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureName);\n      }).on(\"click\", layer1Clicked).on(\"mouseover\", mouseoverLayer1).on(\"mouseout\", mouseoutLayer1);\n\n      // Layer1 border\n      gLayer1.append(\"path\").datum(meshLayer1).attr(\"d\", path).attr(\"class\", \"layer1-boundary\");\n\n      // Layer1 labels\n      gLabelLayer1.selectAll(\"text\").data(layer1Featues).enter().append(\"text\").attr(\"class\", \"label\").attr(\"transform\", function (d) {\n        return \"translate(\" + path.centroid(d) + \")\";\n      }).attr(\"dy\", \".35em\").attr(\"pointer-events\", \"none\").text(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureName);\n      }).attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n      });\n    });\n\n    /***** click to zoom *****/\n    var active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](null);\n\n    var layer2Clicked = function layer2Clicked(d) {\n      if (active.node()) {\n        if (this.getAttribute(\"layer1-feature-code\") == active.node().getAttribute(\"layer1-feature-code\")) {\n          return reset();\n        }\n      }\n    };\n\n    var layer1Clicked = function layer1Clicked(d) {\n      if (active.node() === this) {\n        return reset();\n      }\n\n      active.classed(\"active\", false);\n      active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).classed(\"active\", true);\n\n      zoom(d);\n    };\n\n    var zoom = function zoom(d) {\n      var bounds = path.bounds(d),\n          dx = bounds[1][0] - bounds[0][0],\n          dy = bounds[1][1] - bounds[0][1],\n          x = (bounds[0][0] + bounds[1][0]) / 2,\n          y = (bounds[0][1] + bounds[1][1]) / 2,\n          scale = .9 / Math.max(dx / width, dy / height),\n          translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n      g.transition().duration(750).style(\"stroke-width\", 1.5 / scale + \"px\").attr(\"transform\", \"translate(\" + translate + \")scale(\" + scale + \")\");\n\n      // hide layer1 labels\n      gLabelLayer1.selectAll('text').transition().style(\"fill-opacity\", 0).transition().style(\"display\", \"none\");\n\n      gLayer2.selectAll(\"path\").transition().style(\"fill-opacity\", 1).style(\"display\", \"block\");\n\n      // callback to notify the specified feature is ready to receive location events\n      var featureCode = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode);\n      // scope.onStopEvents();\n      // scope.onReceiveEvents({feature: featureCode});\n\n      vm.$emit(onReceiveEvents);\n      vm.$emit(onStopEvents);\n    };\n\n    function reset() {\n      active.classed(\"active\", false);\n      active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](null);\n\n      g.transition().duration(750).style(\"stroke-width\", \"1.5px\").attr(\"transform\", \"\");\n\n      // show layer1 labels\n      gLabelLayer1.selectAll('text').transition().style(\"display\", \"block\").transition().duration(250).style(\"fill-opacity\", 1);\n\n      gLayer2.selectAll(\"path\").transition().style(\"fill-opacity\", 0).style(\"display\", \"none\");\n\n      // scope.onStopEvents();\n      vm.$emit(onStopEvents);\n    };\n    /***** click to zoom *****/\n\n    /***** hover *****/\n    var mouseoverLayer2 = function mouseoverLayer2(p) {\n      gLabelLayer2.selectAll(\"text\").filter(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(p, layer2FeatureCode) == __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureCode);\n      }).transition().style(\"fill-opacity\", 1).style(\"display\", \"block\");\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n        return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n      });\n    };\n\n    var mouseoutLayer2 = function mouseoutLayer2(p) {\n      gLabelLayer2.selectAll(\"text\").filter(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(p, layer2FeatureCode) == __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer2FeatureCode);\n      }).transition().style(\"fill-opacity\", 0).transition().style(\"display\", \"none\");\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layer1FeatureCode) + \")\";\n      });\n    };\n    /***** hover *****/\n  },\n\n  watch: {\n    layer1EventData: function layer1EventData(newData, oldData) {\n      // console.log(\"newData\", newData);\n      // console.log(\"oldData\", oldData);\n      this.visualizeLayer1Events(newData);\n    }\n  },\n  methods: {\n    visualizeLayer1Events: function visualizeLayer1Events(eventList) {\n      var vm = this;\n\n      var events = __WEBPACK_IMPORTED_MODULE_0_d3__[\"entries\"](eventList);\n      // console.log(\"events\", events);\n      var maxCount = __WEBPACK_IMPORTED_MODULE_0_d3__[\"max\"](events, function (d) {\n        // console.log(\"d\", d);\n        // console.log(\"vm.layer1EventCountTag\", vm.layer1EventCountTag);\n        return d.value[vm.layer1EventCountTag];\n      });\n      // console.log(\"maxCount\", maxCount);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Update the gradient for the legend ///////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var colorScale = this.getColorScale(maxCount, this.colorRange);\n\n      var countPoints = this.getCountPoints(maxCount, this.width, 10);\n\n      //Update the linearGradient\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#common_grads_def\").selectAll(\"linearGradient\").selectAll(\"stop\").attr(\"stop-color\", function (d, i) {\n        return colorScale(countPoints[i]);\n      });\n\n      ///////////////////////////////////////////////////////////////////////////\n      ////////////////////////// Update the legend //////////////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var xAxis = this.getXAxis(this.legendWidth, maxCount);\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#axis\").selectAll(\".tick\").remove();\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#axis\").call(xAxis);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Set the dynamic gradient for layer1 //////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      // const gLayer1 = d3.selectAll(\"#layer1\");\n\n      // edit event count  \n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1\").selectAll(\"path\").filter(function (d) {\n        if (d.type === \"Feature\") {\n          var featureCode = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n          var element = eventList[featureCode];\n\n          if (!element) {\n            d[vm.layer1EventCountTag] = 1;\n            return true;\n          } else {\n            var sortValue = element[vm.layer1EventCountTag];\n            if (d[vm.layer1EventCountTag]) {\n              if (sortValue != d[vm.layer1EventCountTag]) {\n                d[vm.layer1EventCountTag] = sortValue;\n                return true;\n              }\n            } else {\n              d[vm.layer1EventCountTag] = sortValue;\n              return true;\n            }\n          }\n        }\n        return false;\n      });\n\n      // edit event count\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1_grads\").selectAll(\"radialGradient\").selectAll(\"stop\").style(\"stop-color\", function (d, i) {\n        return colorScale(d[vm.layer1EventCountTag]);\n      });\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1_hgrads\").selectAll(\"radialGradient\").selectAll(\"stop\").filter(function (d) {\n        return this.getAttribute(\"offset\") === \"100%\";\n      }).style(\"stop-color\", function (d, i) {\n        return colorScale(d[vm.layer1EventCountTag]);\n      });\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1\").selectAll(\"path\").filter(function (d) {\n        return d.type === \"Feature\";\n      }).style(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n      });\n    },\n\n\n    ///////////////////////////////////////////////////////////////////////////\n    /////////////////////// legend common functions ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    getCountScale: function getCountScale(maxCount, width) {\n      //Calculate the variables for the sort gradient\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([0, maxCount]).range([0, width]);\n    },\n    getCountPoints: function getCountPoints(maxCount, width, size) {\n      //Calculate the variables for the sort gradient\n      var countScale = this.getCountScale(maxCount, size);\n\n      //Calculate the variables for the sort gradient\n      var countRange = countScale.domain();\n      countRange[2] = countRange[1] - countRange[0];\n      var countPoints = [];\n      for (var i = 0; i < size; i++) {\n        countPoints.push(i * countRange[2] / (size - 1) + countRange[0]);\n      }\n\n      return countPoints;\n    },\n    getColorScale: function getColorScale(maxCount, colorRange) {\n\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([0, maxCount / 2, maxCount]).range(colorRange.split(\",\"));\n    },\n    getXAxis: function getXAxis(legendWidth, maxCount) {\n      var xScale = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().range([-legendWidth / 2, legendWidth / 2]).domain([0, maxCount]);\n\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"svg\"].axis().orient(\"bottom\").ticks(5)\n      //.tickFormat(formatPercent)\n      .scale(xScale);\n    }\n  }\n\n});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_topojson__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_findprop__ = __webpack_require__(3);\n//\n//\n//\n//\n//\n\n\n\n\n\nvar props = {\n  // data: {\n  //   type: Array,\n  //   default: () => [],\n  // },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#0d47a1,#e3f2fd'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layerObjects: {\n    type: String,\n    default: 'districts'\n  },\n  layerFeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layerFeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  featureNameStyle: {\n    type: String,\n    default: 'static'\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'd3-geo-staic',\n  // data() {\n  //   return {\n  //     data: [99, 71, 78, 25, 36, 92],\n  //     line: '',\n  //   };\n  // },\n  props: props,\n  mounted: function mounted() {\n\n    var layerObjects = this.layerObjects;\n    var colorRange = this.colorRange;\n    var layerFeatureCode = this.layerFeatureCode;\n    var layerFeatureName = this.layerFeatureName;\n    var featureNameStyle = this.featureNameStyle;\n\n    var svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this.$el).append('svg').attr('width', this.width).attr('height', this.height);\n\n    var g = svg.append('g');\n    var gLayer = g.append(\"g\").attr(\"id\", this.layerObjects);\n    var gLabelLayer = g.append(\"g\").attr(\"id\", this.layerObjects + \"_label\");\n\n    console.log(\"this.center:\", this.center);\n\n    var projection = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].mercator().center(this.center.split(\",\")).scale(this.scale).translate([this.width / 2, this.height / 2]);\n\n    var path = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].path().projection(projection);\n\n    console.log(\"this.topojsonPath:\", this.topojsonPath);\n    __WEBPACK_IMPORTED_MODULE_0_d3__[\"json\"](this.topojsonPath, function (error, json) {\n      console.log(\"layerObjects:\", layerObjects);\n      var layerFeatues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[layerObjects]).features;\n      var mesh = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"mesh\"](json, json.objects[layerObjects], function (a, b) {\n        return a !== b;\n      });\n\n      var color = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([1, layerFeatues.length]).interpolate(__WEBPACK_IMPORTED_MODULE_0_d3__[\"interpolateHcl\"]).range(colorRange.split(\",\"));\n\n      // fill color gradient process\n      var hgrads = g.append(\"defs\").attr(\"id\", layerObjects + \"_hdef\").selectAll(\"radialGradient\").data(layerFeatues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"100%\").attr(\"id\", function (d) {\n        // return \"hgrad\" + d.id;\n        return \"hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n      });\n\n      hgrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n      hgrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \"1\");\n\n      var grads = g.append(\"defs\").attr(\"id\", layerObjects + \"_def\").selectAll(\"radialGradient\").data(layerFeatues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", function (d) {\n        // return \"grad\" + d.id;\n        return \"grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n      });\n\n      grads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \".8\");\n\n      grads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \"1\");\n\n      if (featureNameStyle == 'static') {\n        var mouseover = function mouseover(p) {\n\n          __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n            // return \"url(#hgrad\" + d.id + \")\";\n            return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n          });\n        };\n\n        var mouseout = function mouseout(p) {\n\n          __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n            // return \"url(#grad\" + d.id + \")\";\n            return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n          });\n        };\n\n        // polygons\n        gLayer.selectAll(\"path\").data(layerFeatues).enter().append(\"path\")\n        // .attr(\"class\", \"layer1\")\n        .attr(\"d\", path)\n        // .attr(\"fill\", function(d,i) { \n        //   return color(i + 1);\n        // })\n        .attr(\"fill\", function (d) {\n          // return \"url(#grad\" + d.id + \")\";\n          return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n        }).attr(\"layer-feature-code\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n        }).attr(\"layer-feature-name\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureName);\n        }).on(\"mouseover\", mouseover).on(\"mouseout\", mouseout);\n\n        // border\n        gLayer.append(\"path\").datum(mesh).attr(\"d\", path).attr(\"class\", \"layer1-boundary\");\n\n        // Layer1 labels\n        gLabelLayer.selectAll(\"text\").data(layerFeatues).enter().append(\"text\").attr(\"class\", \"label\").attr(\"pointer-events\", \"none\").attr(\"transform\", function (d) {\n          return \"translate(\" + path.centroid(d) + \")\";\n        }).attr(\"dy\", \".35em\").text(function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureName);\n        }).attr(\"layer-feature-code\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n        });\n      }\n    });\n  }\n});\n\n/***/ }),\n/* 12 */,\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"D3GeoDoubleLayer\", function() { return __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default.a; });\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"D3GeoStatic\", function() { return __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default.a; });\n\n\n\n\n\n/***/ }),\n/* 14 */,\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n/***/ })\n],[13]);\n\n\n// WEBPACK FOOTER //\n// docs/js/vue-d3-geo.bb7878c9bfb266fe658e.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-833fc836\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./D3GeoDoubleLayer.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./D3GeoDoubleLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-833fc836\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./D3GeoDoubleLayer.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/D3GeoDoubleLayer.vue\n// module id = 2\n// module chunks = 0","export default (obj, path) => {\n\n    var args = path.split('.'), i, l;\n\n    for (i=0, l=args.length; i<l; i++) {\n        if (!obj.hasOwnProperty(args[i]))\n            return;\n        obj = obj[args[i]];\n    }\n\n    return obj;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/findprop.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b45b0ece\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./D3GeoStatic.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./D3GeoStatic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b45b0ece\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./D3GeoStatic.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/D3GeoStatic.vue\n// module id = 7\n// module chunks = 0","<template>\n  <div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport findprop from '../utils/findprop';\n\nconst props = {\n  id: {\n    type: String,\n    required: true\n  },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#e3f2fd,#2196f3,#0d47a1'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layer1Objects: {\n    type: String,\n    default: 'districts'\n  },\n  layer2Objects: {\n    type: String,\n    default: 'blocks'\n  },\n  layer1FeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layer1FeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  layer2FeatureName: {\n    type: String,\n    default: 'properties.block'\n  },\n  layer2FeatureCode: {\n    type: String,\n    default: 'properties.block_code'\n  },\n  layer1EventData: {\n    type: Object,\n    default: null\n  },\n  layer2EventData: {\n    type: String,\n    default: 'circleData'\n  },\n  layer1EventCountTag: {\n    type: String,\n    default: 'dropoffCount'\n  },\n  layer1LegendTitle: {\n    type: String,\n    default: '３０分以内の降車イベント'\n  },\n  onReceiveEvents: {\n    type: String,\n    default: 'subTaxiEventsFrom'\n  },\n  onStopEvents: {\n    type: String,\n    default: 'unsubTaxiEvents'\n  }\n};\n\nexport default {\n  name: 'd3-geo-double-layer',\n  data() {\n    return {\n      legendWidth: 0,\n      gLayer1: () => ({})\n    };\n  },\n  props,\n  mounted() {\n    const width = this.width;\n    const height = this.height;\n    const layer1Objects = this.layer1Objects;\n    const layer2Objects = this.layer2Objects;\n    const colorRange = this.colorRange;\n    const layer1FeatureCode = this.layer1FeatureCode;\n    const layer1FeatureName = this.layer1FeatureName;\n    const layer2FeatureCode = this.layer2FeatureCode;\n    const layer2FeatureName = this.layer2FeatureName;\n    const layer1LegendTitle = this.layer1LegendTitle;\n    const onReceiveEvents = this.onReceiveEvents;\n    const onStopEvents = this.onStopEvents;\n    let vm = this;\n\n\n    const svg = d3.select(this.$el)\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height);\n\n    svg.append(\"rect\")\n      .attr(\"class\", \"background\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .on(\"click\", reset);\n\n    const g = svg.append('g');\n    const gLayer2 = g.append(\"g\").attr(\"id\", \"layer2\");\n    const gLayer1 = g.append(\"g\").attr(\"id\", \"layer1\");\n// console.log(\"gLayer1\", gLayer1);\n    // this.gLayer1 = gLayer1;\n// console.log(\"this.gLayer1\", this.gLayer1);\n    const gLabelLayer2 = g.append(\"g\").attr(\"id\", \"layer2_label\");\n    const gLabelLayer1 = g.append(\"g\").attr(\"id\", \"layer1_label\");\n\n    const projection = d3.geo.mercator()\n      .center(this.center.split(\",\"))\n      .scale(this.scale)\n      .translate([width / 2, height / 2]);\n\n    const path = d3.geo.path().projection(projection);\n    \n\n    ///////////////////////////////////////////////////////////////////////////\n    ///////////////// adding common static gradients //////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    const commonGrads = g.append(\"defs\").attr(\"id\", \"common_grads_def\");\n\n    const circleGrads = commonGrads\n      .append(\"radialGradient\")\n      .attr(\"gradientUnits\", \"objectBoundingBox\")\n      .attr(\"fx\", \"50%\")\n      .attr(\"fy\", \"50%\")\n      .attr(\"cx\", \"50%\")\n      .attr(\"cy\", \"50%\")\n      .attr(\"r\", \"35%\")\n      .attr(\"id\", \"circleGrad1\");\n      \n    circleGrads.append(\"stop\")\n      .attr(\"offset\", \"0%\")\n      .style(\"stop-color\",  \"white\")\n      .style(\"stop-opacity\", \"1\");\n    \n    circleGrads.append(\"stop\")\n      .attr(\"offset\", \"100%\")\n      .style(\"stop-color\",  function(d) { \n        return \"orange\";\n      })\n      .style(\"stop-opacity\", \".6\");\n\n    ///////////////////////////////////////////////////////////////////////////\n    //////////////// Adding the initial gradient for the legend ///////////////\n    ///////////////////////////////////////////////////////////////////////////\n    const countPoints = this.getCountPoints(1, width, 10);\n    const countScale = this.getCountScale(1, width);\n\n    //Create the linearGradient\n    commonGrads\n      .append(\"linearGradient\")\n      .attr(\"id\", \"legend-traffic\")\n      .attr(\"x1\", \"0%\").attr(\"y1\", \"0%\")\n      .attr(\"x2\", \"100%\").attr(\"y2\", \"0%\")\n      .selectAll(\"stop\") \n      .data(d3.range(10))                \n      .enter().append(\"stop\") \n      .attr(\"offset\", function(d,i) { \n        return countScale( countPoints[i] )/width;\n      })   \n      .attr(\"stop-color\", function(d,i) { \n        return colorRange.split(\",\")[0]; \n      });\n\n\n\n    ///////////////////////////////////////////////////////////////////////////\n    ////////////////////////// Draw the init legend ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n\n    const gBox = g.node().getBBox();\n\n    this.legendWidth = Math.min(width*0.8, 600);\n    //Color Legend container\n    const legendsvg = g.append(\"g\")\n      .attr(\"id\", \"legendWrapper\")\n      .attr(\"transform\", \"translate(\" + (width/2) + \",\" + (height * 0.95) + \")\");\n\n    //Draw the Rectangle\n    legendsvg.append(\"rect\")\n      .attr(\"id\", \"legendRect\")\n      .attr(\"x\", -this.legendWidth/2)\n      .attr(\"y\", 0)\n      .attr(\"width\", this.legendWidth)\n      .attr(\"height\", 10)\n      .style(\"fill\", \"url(#legend-traffic)\");\n      \n    //Append title\n    legendsvg.append(\"text\")\n      .attr(\"class\", \"layer1LegendTitle\")\n      .attr(\"x\", 0)\n      .attr(\"y\", -10)\n      .style(\"text-anchor\", \"middle\")\n      .text(layer1LegendTitle);\n\n    //Define x-axis\n    const xAxis = this.getXAxis(this.legendWidth, 0);\n\n    //Set up X axis\n    legendsvg.append(\"g\")\n      .attr(\"id\", \"axis\")\n      .attr(\"transform\", \"translate(0,\" + (10) + \")\")\n      .call(xAxis);\n\n    // console.log(\"this.topojsonPath:\", this.topojsonPath);\n\n    d3.json(this.topojsonPath, function (error, json) {\n      let vm = this;\n\n      const layer1Featues = topojson.feature(json, json.objects[layer1Objects]).features;\n      const layer2Featues = topojson.feature(json, json.objects[layer2Objects]).features;\n      const meshLayer1 = topojson.mesh(json, json.objects[layer1Objects], function(a, b) { return a !== b; });\n\n      const initColor = colorRange.split(\",\")[0];\n\n      // fill color gradient process\n      const hgrads = g.append(\"defs\").attr(\"id\", \"layer1_hgrads\").selectAll(\"radialGradient\")\n        .data(layer1Featues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"100%\")\n        .attr(\"id\", function(d, i) { \n          \n          return \"hgrad\" + findprop(d, layer1FeatureCode);\n          // return \"hgrad\" + (i + 1);\n        });\n      \n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\", \"white\")\n          .style(\"stop-opacity\", \"1\");\n\n\n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const grads = g.append(\"defs\").attr(\"id\", \"layer1_grads\").selectAll(\"radialGradient\")\n        .data(layer1Featues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"35%\")\n        .attr(\"id\", function(d, i) { \n          return \"grad\" + findprop(d, layer1FeatureCode);\n          // return \"grad\" + (i + 1);\n        });\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \".7\");\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const mouseoverLayer1 = function(p) {\n        d3.select(this)\n          .style(\"fill\", function(d) {\n              return \"url(#hgrad\" + findprop(d, layer1FeatureCode) + \")\";\n          });\n      }\n      \n      const mouseoutLayer1 = function (p) {\n        d3.select(this)\n          .style(\"fill\", function(d) { \n            return \"url(#grad\" + findprop(d, layer1FeatureCode) + \")\";\n          });\n      }\n\n      // layer2 polygons and boundary\n      gLayer2.selectAll(\"path\")\n        .data(layer2Featues)\n        .enter().append(\"path\")\n        .attr(\"d\", path)\n        .attr(\"fill\", function(d, i) {\n            return \"url(#grad\" + findprop(d, layer1FeatureCode) + \")\";\n            // return \"#bbdefb\";\n        })\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\")\n        .attr(\"layer1-feature-code\", function(d) {\n          return findprop(d, layer1FeatureCode);\n        })\n        .attr(\"layer1-feature-name\", function(d) {\n          return findprop(d, layer1FeatureName);\n        })\n        .attr(\"layer2-feature-code\", function(d) { \n          return findprop(d, layer2FeatureCode);\n        })\n        .attr(\"layer2-feature-name\", function(d) { \n          return findprop(d, layer2FeatureName);\n        })\n        .attr(\"class\", \"layer2\")\n        .on(\"click\", layer2Clicked)\n        .on(\"mouseover\", mouseoverLayer2)\n        .on(\"mouseout\", mouseoutLayer2);\n\n      // Layer2 labels\n      gLabelLayer2.selectAll(\"text\")\n        .data(layer2Featues)\n        .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\")\n        .attr(\"transform\", function(d) { \n          return \"translate(\" + path.centroid(d) + \")\"; \n        })\n        .attr(\"dy\", \".35em\")\n        .attr(\"pointer-events\", \"none\")\n        .text(function(d) { \n          return findprop(d, layer2FeatureName); \n        })\n        .attr(\"layer2-feature-code\", function(d) { \n          return findprop(d, layer2FeatureCode);\n        });\n\n      // Layer1 polygons\n// console.log(\"vm.gLayer1!!!!!!!!!!\", vm.gLayer1);\n      gLayer1.selectAll(\"path\")\n        .data(layer1Featues)\n        .enter().append(\"path\")\n        .attr(\"class\", \"layer1\")\n        .attr(\"d\", path)\n        .style(\"fill\", function(d, i) {\n          return \"url(#grad\" + findprop(d, layer1FeatureCode) + \")\";\n        })\n        .attr(\"layer1-feature-code\", function(d) {\n          return findprop(d, layer1FeatureCode);\n        })\n        .attr(\"layer1-feature-name\", function(d) {\n          return findprop(d, layer1FeatureName);\n        })\n        .on(\"click\", layer1Clicked)\n        .on(\"mouseover\", mouseoverLayer1)\n        .on(\"mouseout\", mouseoutLayer1);\n\n      // Layer1 border\n      gLayer1.append(\"path\")\n        .datum(meshLayer1)\n        .attr(\"d\", path)\n        .attr(\"class\", \"layer1-boundary\");\n\n      // Layer1 labels\n      gLabelLayer1.selectAll(\"text\")\n        .data(layer1Featues)\n        .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"transform\", function(d) { \n          return \"translate(\" + path.centroid(d) + \")\"; \n        })\n        .attr(\"dy\", \".35em\")\n        .attr(\"pointer-events\", \"none\")\n        .text(function(d) { \n          return findprop(d, layer1FeatureName); \n        })\n        .attr(\"layer1-feature-code\", function(d) { \n          return findprop(d, layer1FeatureCode);\n        });\n\n    });\n\n    /***** click to zoom *****/\n    var active = d3.select(null);\n\n    const layer2Clicked = function(d) {\n      if (active.node()) {\n        if (this.getAttribute(\"layer1-feature-code\") == active.node().getAttribute(\"layer1-feature-code\")) {\n          return reset();\n        }\n      }\n    }\n\n    const layer1Clicked = function(d) {\n      if (active.node() === this) {\n        return reset();\n      }\n\n      active.classed(\"active\", false);\n      active = d3.select(this).classed(\"active\", true);\n\n      zoom(d);\n    };\n\n\n    const zoom = function(d) {\n      const bounds = path.bounds(d),\n          dx = bounds[1][0] - bounds[0][0],\n          dy = bounds[1][1] - bounds[0][1],\n          x = (bounds[0][0] + bounds[1][0]) / 2,\n          y = (bounds[0][1] + bounds[1][1]) / 2,\n          scale = .9 / Math.max(dx / width, dy / height),\n          translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n      g.transition()\n        .duration(750)\n        .style(\"stroke-width\", 1.5 / scale + \"px\")\n        .attr(\"transform\", \"translate(\" + translate + \")scale(\" + scale + \")\");\n\n      // hide layer1 labels\n      gLabelLayer1.selectAll('text')\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .transition()\n        .style(\"display\", \"none\");\n\n\n      gLayer2.selectAll(\"path\")\n        .transition()\n        .style(\"fill-opacity\", 1)\n        .style(\"display\", \"block\");\n\n\n      // callback to notify the specified feature is ready to receive location events\n      const featureCode = findprop(d, layer1FeatureCode);\n      // scope.onStopEvents();\n      // scope.onReceiveEvents({feature: featureCode});\n\n      vm.$emit(onReceiveEvents);\n      vm.$emit(onStopEvents);\n    }\n\n    function reset() {\n      active.classed(\"active\", false);\n      active = d3.select(null);\n\n      g.transition()\n        .duration(750)\n        .style(\"stroke-width\", \"1.5px\")\n        .attr(\"transform\", \"\");\n\n      // show layer1 labels\n      gLabelLayer1.selectAll('text')\n        .transition()\n        .style(\"display\", \"block\")\n        .transition()\n        .duration(250)\n        .style(\"fill-opacity\", 1);\n\n      gLayer2.selectAll(\"path\")\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\");\n\n      // scope.onStopEvents();\n      vm.$emit(onStopEvents);\n    };\n    /***** click to zoom *****/\n\n    /***** hover *****/\n    const mouseoverLayer2 = function(p) {\n      gLabelLayer2.selectAll(\"text\")\n        .filter(function(d){\n          return findprop(p, layer2FeatureCode) == findprop(d, layer2FeatureCode);\n        })\n        .transition()\n        .style(\"fill-opacity\", 1)\n        .style(\"display\", \"block\");\n\n      d3.select(this)\n        .style(\"fill\", function(d) {\n            return \"url(#hgrad\" + findprop(d, layer1FeatureCode) + \")\";\n        });\n    }\n    \n    const mouseoutLayer2 = function (p) {\n      gLabelLayer2.selectAll(\"text\")\n        .filter(function(d){\n          return findprop(p, layer2FeatureCode) == findprop(d, layer2FeatureCode);\n        })\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .transition()\n        .style(\"display\", \"none\");\n\n      d3.select(this)\n        .style(\"fill\", function(d) {\n            return \"url(#grad\" + findprop(d, layer1FeatureCode) + \")\";\n        });\n    }\n    /***** hover *****/\n  },\n  watch: {\n    layer1EventData: function(newData, oldData) {\n      // console.log(\"newData\", newData);\n      // console.log(\"oldData\", oldData);\n      this.visualizeLayer1Events(newData);\n    }\n  },\n  methods: {\n\n    visualizeLayer1Events(eventList) {\n      let vm = this;\n\n      var events = d3.entries(eventList);\n// console.log(\"events\", events);\n      var maxCount = d3.max(events, function(d) {\n        // console.log(\"d\", d);\n        // console.log(\"vm.layer1EventCountTag\", vm.layer1EventCountTag);\n        return d.value[vm.layer1EventCountTag]; \n      });\n// console.log(\"maxCount\", maxCount);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Update the gradient for the legend ///////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var colorScale = this.getColorScale(maxCount, this.colorRange);\n\n      var countPoints = this.getCountPoints(maxCount, this.width, 10);\n\n      //Update the linearGradient\n      d3.select(\"#common_grads_def\")\n        .selectAll(\"linearGradient\")\n        .selectAll(\"stop\")\n        .attr(\"stop-color\",  function(d, i) { \n          return colorScale(countPoints[i]); \n        });\n\n      ///////////////////////////////////////////////////////////////////////////\n      ////////////////////////// Update the legend //////////////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var xAxis = this.getXAxis(this.legendWidth, maxCount);\n\n      d3.select(\"#axis\")\n        .selectAll(\".tick\")\n        .remove();\n\n      d3.select(\"#axis\")\n        .call(xAxis);\n\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Set the dynamic gradient for layer1 //////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      // const gLayer1 = d3.selectAll(\"#layer1\");\n\n      // edit event count  \n      d3.select(\"#layer1\").selectAll(\"path\")\n        .filter(function(d){\n          if (d.type === \"Feature\") {\n            var featureCode = findprop(d, vm.layer1FeatureCode);\n            var element = eventList[featureCode];\n            \n            if (!element) {\n              d[vm.layer1EventCountTag] = 1;\n              return true;\n            } \n            else {\n              var sortValue = element[vm.layer1EventCountTag];\n              if (d[vm.layer1EventCountTag]) {\n                if (sortValue != d[vm.layer1EventCountTag]) {\n                  d[vm.layer1EventCountTag] = sortValue;\n                  return true;\n                }\n              } \n              else {\n                d[vm.layer1EventCountTag] = sortValue;\n                return true;\n              }                    \n            }\n          }\n          return false;\n        });\n\n      // edit event count\n      d3.select(\"#layer1_grads\")\n        .selectAll(\"radialGradient\")\n        .selectAll(\"stop\")\n        .style(\"stop-color\",  function(d, i) { \n          return colorScale(d[vm.layer1EventCountTag]); \n        });\n\n      d3.select(\"#layer1_hgrads\")\n        .selectAll(\"radialGradient\")\n        .selectAll(\"stop\")\n        .filter(function(d){\n            return this.getAttribute(\"offset\") === \"100%\"\n        })\n        .style(\"stop-color\",  function(d, i) { \n          return colorScale(d[vm.layer1EventCountTag]); \n        });\n\n      d3.select(\"#layer1\").selectAll(\"path\")\n        .filter(function(d){\n          return d.type === \"Feature\"\n        })\n        .style(\"fill\", function(d, i) {\n          return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n        });\n    },\n  \n    ///////////////////////////////////////////////////////////////////////////\n    /////////////////////// legend common functions ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    getCountScale(maxCount, width) {\n      //Calculate the variables for the sort gradient\n      return d3.scale.linear()\n        .domain([0, maxCount])\n        .range([0, width]);\n    },\n    getCountPoints(maxCount, width, size) {\n      //Calculate the variables for the sort gradient\n      const countScale = this.getCountScale(maxCount, size);\n\n      //Calculate the variables for the sort gradient\n      const countRange = countScale.domain();\n      countRange[2] = countRange[1] - countRange[0];\n      const countPoints = [];\n      for(var i = 0; i < size; i++) {\n        countPoints.push(i * countRange[2]/(size-1) + countRange[0]);\n      }\n\n      return countPoints;\n    },\n    getColorScale(maxCount, colorRange) {\n\n      return d3.scale.linear()\n        .domain([0, maxCount/2, maxCount])\n        .range(colorRange.split(\",\"));\n    },\n    getXAxis(legendWidth, maxCount) {\n      const xScale = d3.scale.linear()\n       .range([-legendWidth/2, legendWidth/2])\n       .domain([ 0, maxCount　] );\n\n      return d3.svg.axis().orient(\"bottom\")\n              .ticks(5)\n              //.tickFormat(formatPercent)\n              .scale(xScale);\n    }\n  }\n\n};\n</script>\n\n<style>\n@import url(//fonts.googleapis.com/earlyaccess/notosansjapanese.css);\n\nsvg {\n  font-size: 11px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 300;\n  margin: auto;\n  display: block;\n}\n\n.background {\n  fill: none;\n  pointer-events: all;\n}\n\n.circle {\n}\n\n.layer1 {\n  cursor: pointer;\n}\n\n\n.layer1:hover {\n  fill: orange;\n}\n\n.layer1.active {\n  display:none;\n}\n\n.layer1-boundary {\n  fill: none;\n  stroke: white;\n  stroke-dasharray: 2,2;\n  stroke-linejoin: round;\n  stroke-width: 1;\n}\n\n.layer1LegendTitle {\n  fill: black;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n}\n\n.layer2 {\n  stroke: white;\n  stroke-width: 0.2;\n}\n\n.label {\n  fill: white;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n  text-shadow:\n    2px 2px 0 #000,\n    -1px -1px 0 #000,  \n    1px -1px 0 #000,\n    -1px 1px 0 #000,\n     1px 1px 0 #000;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// D3GeoDoubleLayer.vue?12f50da6","<template>\n  <div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport findprop from '../utils/findprop';\n\nconst props = {\n  // data: {\n  //   type: Array,\n  //   default: () => [],\n  // },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#0d47a1,#e3f2fd'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layerObjects: {\n    type: String,\n    default: 'districts'\n  },\n  layerFeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layerFeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  featureNameStyle: {\n    type: String,\n    default: 'static'\n  }\n};\n\nexport default {\n  name: 'd3-geo-staic',\n  // data() {\n  //   return {\n  //     data: [99, 71, 78, 25, 36, 92],\n  //     line: '',\n  //   };\n  // },\n  props,\n  mounted() {\n\n    const layerObjects = this.layerObjects;\n    const colorRange = this.colorRange;\n    const layerFeatureCode = this.layerFeatureCode;\n    const layerFeatureName = this.layerFeatureName;\n    const featureNameStyle = this.featureNameStyle;\n\n    const svg = d3.select(this.$el)\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height);\n\n    const g = svg.append('g');\n    const gLayer = g.append(\"g\").attr(\"id\", this.layerObjects);\n    const gLabelLayer = g.append(\"g\").attr(\"id\", this.layerObjects + \"_label\");\n\n    console.log(\"this.center:\", this.center);\n\n    const projection = d3.geo.mercator()\n      .center(this.center.split(\",\"))\n      .scale(this.scale)\n      .translate([this.width / 2, this.height / 2]);\n\n    const path = d3.geo.path().projection(projection);\n    \n\n    \n    \n\n    console.log(\"this.topojsonPath:\", this.topojsonPath);\n    d3.json(this.topojsonPath, function (error, json) {\n      console.log(\"layerObjects:\", layerObjects);\n      const layerFeatues = topojson.feature(json, json.objects[layerObjects]).features;\n      const mesh = topojson.mesh(json, json.objects[layerObjects], function(a, b) { return a !== b; });\n\n      const color = d3.scale.linear().domain([1,layerFeatues.length])\n                    .interpolate(d3.interpolateHcl)\n                    .range(colorRange.split(\",\"));\n\n      // fill color gradient process\n      const hgrads = g.append(\"defs\").attr(\"id\", layerObjects + \"_hdef\").selectAll(\"radialGradient\")\n        .data(layerFeatues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"100%\")\n        .attr(\"id\", function(d) { \n          // return \"hgrad\" + d.id;\n          return \"hgrad\" + findprop(d, layerFeatureCode);\n        });\n      \n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\", \"white\")\n          .style(\"stop-opacity\", \"1\");\n\n\n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const grads = g.append(\"defs\").attr(\"id\", layerObjects + \"_def\").selectAll(\"radialGradient\")\n        .data(layerFeatues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"35%\")\n        .attr(\"id\", function(d) { \n          // return \"grad\" + d.id;\n          return \"grad\" + findprop(d, layerFeatureCode);\n        });\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \".8\");\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      if (featureNameStyle == 'static') {\n        var mouseover = function(p) {\n\n          d3.select(this)\n            .style(\"fill\", function(d) {\n                // return \"url(#hgrad\" + d.id + \")\";\n                return \"url(#hgrad\" + findprop(d, layerFeatureCode) + \")\";\n            });\n\n        }\n        \n        var mouseout = function (p) {\n\n          d3.select(this)\n            .style(\"fill\", function(d) { \n              // return \"url(#grad\" + d.id + \")\";\n              return \"url(#grad\" + findprop(d, layerFeatureCode) + \")\";\n            });\n        }\n\n        // polygons\n        gLayer.selectAll(\"path\")\n          .data(layerFeatues)\n          .enter().append(\"path\")\n          // .attr(\"class\", \"layer1\")\n          .attr(\"d\", path)\n          // .attr(\"fill\", function(d,i) { \n          //   return color(i + 1);\n          // })\n          .attr(\"fill\", function(d) {\n              // return \"url(#grad\" + d.id + \")\";\n              return \"url(#grad\" + findprop(d, layerFeatureCode) + \")\";\n          })\n          .attr(\"layer-feature-code\", function(d) {\n            return findprop(d, layerFeatureCode);\n          })\n          .attr(\"layer-feature-name\", function(d) {\n            return findprop(d, layerFeatureName);\n          })\n          .on(\"mouseover\", mouseover)\n          .on(\"mouseout\", mouseout);\n\n        // border\n        gLayer.append(\"path\")\n          .datum(mesh)\n          .attr(\"d\", path)\n          .attr(\"class\", \"layer1-boundary\");\n\n        // Layer1 labels\n        gLabelLayer.selectAll(\"text\")\n          .data(layerFeatues)\n          .enter().append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"pointer-events\", \"none\")\n          .attr(\"transform\", function(d) { \n            return \"translate(\" + path.centroid(d) + \")\"; \n          })\n          .attr(\"dy\", \".35em\")\n          .text(function(d) { \n            return findprop(d, layerFeatureName); \n          })\n          .attr(\"layer-feature-code\", function(d) { \n            return findprop(d, layerFeatureCode);\n          });\n\n      } \n\n    });\n\n  }\n};\n</script>\n\n\n\n<style>\n@import url(//fonts.googleapis.com/earlyaccess/notosansjapanese.css);\n\nsvg {\n  font-size: 11px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 300;\n  margin: auto;\n  display: block;\n}\n\n.background {\n  fill: none;\n  pointer-events: all;\n}\n\n.circle {\n}\n\n.layer1 {\n  cursor: pointer;\n}\n\n\n.layer1:hover {\n  fill: orange;\n}\n\n.layer1.active {\n  display:none;\n}\n\n.layer1-boundary {\n  fill: none;\n  stroke: white;\n  stroke-dasharray: 2,2;\n  stroke-linejoin: round;\n  stroke-width: 1;\n}\n\n.layer1LegendTitle {\n  fill: black;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n}\n\n.layer2 {\n  stroke: white;\n  stroke-width: 0.2;\n}\n\n.label {\n  fill: white;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n  text-shadow:\n    2px 2px 0 #000,\n    -1px -1px 0 #000,  \n    1px -1px 0 #000,\n    -1px 1px 0 #000,\n     1px 1px 0 #000;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// D3GeoStatic.vue?765f993a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-833fc836\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/D3GeoDoubleLayer.vue\n// module id = 21\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b45b0ece\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/D3GeoStatic.vue\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}