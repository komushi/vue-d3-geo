{"version":3,"sources":["webpack:///docs/js/vue-d3-geo.594ad3e800b0085975b1.js","webpack:///./src/components/D3GeoDoubleLayer.vue?9b69","webpack:///./src/utils/findprop.js","webpack:///./src/components/D3GeoStatic.vue?a7da","webpack:///D3GeoDoubleLayer.vue","webpack:///D3GeoStatic.vue","webpack:///./src/components/D3GeoDoubleLayer.vue?1989","webpack:///./src/components/D3GeoStatic.vue?d3fe"],"names":["webpackJsonp","module","exports","__webpack_require__","injectStyle","ssrContext","Component","__webpack_exports__","obj","path","i","l","args","split","length","hasOwnProperty","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_d3__","__WEBPACK_IMPORTED_MODULE_1_topojson__","n","__WEBPACK_IMPORTED_MODULE_2__utils_findprop__","props","id","type","String","required","topojsonPath","width","Number","default","height","colorRange","center","scale","layer1Objects","layer2Objects","layer1FeatureName","layer1FeatureCode","layer2FeatureName","layer2FeatureCode","layer1EventData","layer2EventData","layer1EventCountTag","layer1LegendTitle","name","data","legendWidth","mounted","reset","active","classed","g","transition","duration","style","attr","gLabelLayer1","selectAll","gLayer2","vm","$emit","this","onReceiveEvents","onStopEvents","svg","$el","append","on","gLayer1","gLabelLayer2","projection","mercator","translate","commonGrads","circleGrads","d","countPoints","getCountPoints","countScale","getCountScale","enter","node","getBBox","Math","min","legendsvg","text","xAxis","getXAxis","call","error","json","layer1Featues","objects","features","layer2Featues","meshLayer1","a","b","initColor","hgrads","grads","mouseoverLayer1","p","mouseoutLayer1","layer2Clicked","mouseoverLayer2","mouseoutLayer2","centroid","layer1Clicked","datum","getAttribute","zoom","console","log","bounds","dx","dy","x","y","max","filter","watch","newData","oldData","visualizeLayer1Events","methods","eventList","events","maxCount","colorScale","getColorScale","remove","featureCode","element","sortValue","linear","domain","range","size","countRange","push","xScale","axis","orient","ticks","layerObjects","layerFeatureName","layerFeatureCode","featureNameStyle","gLayer","gLabelLayer","layerFeatues","mesh","color","interpolate","mouseover","mouseout","__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__","__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default","__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__","__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default","render","_vm","_h","$createElement","_self","_c","staticRenderFns"],"mappings":"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","file":"docs/js/vue-d3-geo.594ad3e800b0085975b1.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(15)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(10),\n  /* template */\n  __webpack_require__(21),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (obj, path) {\n\n    var args = path.split('.'),\n        i,\n        l;\n\n    for (i = 0, l = args.length; i < l; i++) {\n        if (!obj.hasOwnProperty(args[i])) return;\n        obj = obj[args[i]];\n    }\n\n    return obj;\n});\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(16)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(11),\n  /* template */\n  __webpack_require__(22),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 8 */,\n/* 9 */,\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_topojson__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_findprop__ = __webpack_require__(3);\n//\n//\n//\n//\n//\n\n\n\n\n\nvar props = {\n  id: {\n    type: String,\n    required: true\n  },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#e3f2fd,#2196f3,#0d47a1'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layer1Objects: {\n    type: String,\n    default: 'districts'\n  },\n  layer2Objects: {\n    type: String,\n    default: 'blocks'\n  },\n  layer1FeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layer1FeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  layer2FeatureName: {\n    type: String,\n    default: 'properties.block'\n  },\n  layer2FeatureCode: {\n    type: String,\n    default: 'properties.block_code'\n  },\n  layer1EventData: {\n    type: Object,\n    default: null\n  },\n  layer2EventData: {\n    type: String,\n    default: 'circleData'\n  },\n  layer1EventCountTag: {\n    type: String,\n    default: 'dropoffCount'\n  },\n  layer1LegendTitle: {\n    type: String,\n    default: '３０分以内の降車イベント'\n  }\n  // onReceiveEvents: {\n  //   type: String,\n  //   default: 'subTaxiEventsFrom'\n  // },\n  // onStopEvents: {\n  //   type: String,\n  //   default: 'unsubTaxiEvents'\n  // }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'd3-geo-double-layer',\n  data: function data() {\n    return {\n      legendWidth: 0\n    };\n  },\n\n  props: props,\n  mounted: function mounted() {\n    // const width = this.width;\n    // const height = this.height;\n    // const layer1Objects = this.layer1Objects;\n    // const layer2Objects = this.layer2Objects;\n    // const colorRange = this.colorRange;\n    // const layer1FeatureCode = this.layer1FeatureCode;\n    // const layer1FeatureName = this.layer1FeatureName;\n    // const layer2FeatureCode = this.layer2FeatureCode;\n    // const layer2FeatureName = this.layer2FeatureName;\n    var layer1LegendTitle = this.layer1LegendTitle;\n    var onReceiveEvents = this.onReceiveEvents;\n    var onStopEvents = this.onStopEvents;\n    var vm = this;\n\n    var svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this.$el).append('svg').attr('width', vm.width).attr('height', vm.height);\n\n    svg.append(\"rect\").attr(\"class\", \"background\").attr(\"width\", vm.width).attr(\"height\", vm.height).on(\"click\", reset);\n\n    var g = svg.append('g');\n    var gLayer2 = g.append(\"g\").attr(\"id\", \"layer2\");\n    var gLayer1 = g.append(\"g\").attr(\"id\", \"layer1\");\n    // console.log(\"gLayer1\", gLayer1);\n    // this.gLayer1 = gLayer1;\n    // console.log(\"this.gLayer1\", this.gLayer1);\n    var gLabelLayer2 = g.append(\"g\").attr(\"id\", \"layer2_label\");\n    var gLabelLayer1 = g.append(\"g\").attr(\"id\", \"layer1_label\");\n\n    var projection = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].mercator().center(this.center.split(\",\")).scale(this.scale).translate([vm.width / 2, vm.height / 2]);\n\n    var path = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].path().projection(projection);\n\n    ///////////////////////////////////////////////////////////////////////////\n    ///////////////// adding common static gradients //////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    var commonGrads = g.append(\"defs\").attr(\"id\", \"common_grads_def\");\n\n    var circleGrads = commonGrads.append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", \"circleGrad1\");\n\n    circleGrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n    circleGrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d) {\n      return \"orange\";\n    }).style(\"stop-opacity\", \".6\");\n\n    ///////////////////////////////////////////////////////////////////////////\n    //////////////// Adding the initial gradient for the legend ///////////////\n    ///////////////////////////////////////////////////////////////////////////\n    var countPoints = this.getCountPoints(1, vm.width, 10);\n    var countScale = this.getCountScale(1, vm.width);\n\n    //Create the linearGradient\n    commonGrads.append(\"linearGradient\").attr(\"id\", \"legend-traffic\").attr(\"x1\", \"0%\").attr(\"y1\", \"0%\").attr(\"x2\", \"100%\").attr(\"y2\", \"0%\").selectAll(\"stop\").data(__WEBPACK_IMPORTED_MODULE_0_d3__[\"range\"](10)).enter().append(\"stop\").attr(\"offset\", function (d, i) {\n      return countScale(countPoints[i]) / vm.width;\n    }).attr(\"stop-color\", function (d, i) {\n      return vm.colorRange.split(\",\")[0];\n    });\n\n    ///////////////////////////////////////////////////////////////////////////\n    ////////////////////////// Draw the init legend ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n\n    var gBox = g.node().getBBox();\n\n    this.legendWidth = Math.min(vm.width * 0.8, 600);\n    //Color Legend container\n    var legendsvg = g.append(\"g\").attr(\"id\", \"legendWrapper\").attr(\"transform\", \"translate(\" + vm.width / 2 + \",\" + vm.height * 0.95 + \")\");\n\n    //Draw the Rectangle\n    legendsvg.append(\"rect\").attr(\"id\", \"legendRect\").attr(\"x\", -this.legendWidth / 2).attr(\"y\", 0).attr(\"width\", this.legendWidth).attr(\"height\", 10).style(\"fill\", \"url(#legend-traffic)\");\n\n    //Append title\n    legendsvg.append(\"text\").attr(\"class\", \"layer1LegendTitle\").attr(\"x\", 0).attr(\"y\", -10).style(\"text-anchor\", \"middle\").text(layer1LegendTitle);\n\n    //Define x-axis\n    var xAxis = this.getXAxis(this.legendWidth, 0);\n\n    //Set up X axis\n    legendsvg.append(\"g\").attr(\"id\", \"axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").call(xAxis);\n\n    // console.log(\"this.topojsonPath:\", this.topojsonPath);\n\n    __WEBPACK_IMPORTED_MODULE_0_d3__[\"json\"](this.topojsonPath, function (error, json) {\n\n      var layer1Featues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[vm.layer1Objects]).features;\n      var layer2Featues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[vm.layer2Objects]).features;\n      var meshLayer1 = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"mesh\"](json, json.objects[vm.layer1Objects], function (a, b) {\n        return a !== b;\n      });\n\n      var initColor = vm.colorRange.split(\",\")[0];\n\n      // fill color gradient process\n      var hgrads = g.append(\"defs\").attr(\"id\", \"layer1_hgrads\").selectAll(\"radialGradient\").data(layer1Featues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"100%\").attr(\"id\", function (d, i) {\n\n        return \"hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n        // return \"hgrad\" + (i + 1);\n      });\n\n      hgrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n      hgrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \"1\");\n\n      var grads = g.append(\"defs\").attr(\"id\", \"layer1_grads\").selectAll(\"radialGradient\").data(layer1Featues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", function (d, i) {\n        return \"grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n        // return \"grad\" + (i + 1);\n      });\n\n      grads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \".7\");\n\n      grads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return initColor;\n      }).style(\"stop-opacity\", \"1\");\n\n      var mouseoverLayer1 = function mouseoverLayer1(p) {\n        __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n          return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n        });\n      };\n\n      var mouseoutLayer1 = function mouseoutLayer1(p) {\n        __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n          return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n        });\n      };\n\n      // layer2 polygons and boundary\n      gLayer2.selectAll(\"path\").data(layer2Featues).enter().append(\"path\").attr(\"d\", path).attr(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n        // return \"#bbdefb\";\n      }).style(\"fill-opacity\", 0).style(\"display\", \"none\").attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n      }).attr(\"layer1-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureName);\n      }).attr(\"layer2-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureCode);\n      }).attr(\"layer2-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureName);\n      }).attr(\"class\", \"layer2\").on(\"click\", layer2Clicked).on(\"mouseover\", mouseoverLayer2).on(\"mouseout\", mouseoutLayer2);\n\n      // Layer2 labels\n      gLabelLayer2.selectAll(\"text\").data(layer2Featues).enter().append(\"text\").attr(\"class\", \"label\").style(\"fill-opacity\", 0).style(\"display\", \"none\").attr(\"transform\", function (d) {\n        return \"translate(\" + path.centroid(d) + \")\";\n      }).attr(\"dy\", \".35em\").attr(\"pointer-events\", \"none\").text(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureName);\n      }).attr(\"layer2-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureCode);\n      });\n\n      // Layer1 polygons\n      // console.log(\"vm.gLayer1!!!!!!!!!!\", vm.gLayer1);\n      gLayer1.selectAll(\"path\").data(layer1Featues).enter().append(\"path\").attr(\"class\", \"layer1\").attr(\"d\", path).style(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n      }).attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n      }).attr(\"layer1-feature-name\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureName);\n      }).on(\"click\", layer1Clicked).on(\"mouseover\", mouseoverLayer1).on(\"mouseout\", mouseoutLayer1);\n\n      // Layer1 border\n      gLayer1.append(\"path\").datum(meshLayer1).attr(\"d\", path).attr(\"class\", \"layer1-boundary\");\n\n      // Layer1 labels\n      gLabelLayer1.selectAll(\"text\").data(layer1Featues).enter().append(\"text\").attr(\"class\", \"label\").attr(\"transform\", function (d) {\n        return \"translate(\" + path.centroid(d) + \")\";\n      }).attr(\"dy\", \".35em\").attr(\"pointer-events\", \"none\").text(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureName);\n      }).attr(\"layer1-feature-code\", function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n      });\n    });\n\n    /***** click to zoom *****/\n    var active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](null);\n\n    var layer2Clicked = function layer2Clicked(d) {\n      if (active.node()) {\n        if (this.getAttribute(\"layer1-feature-code\") == active.node().getAttribute(\"layer1-feature-code\")) {\n          return reset();\n        }\n      }\n    };\n\n    var layer1Clicked = function layer1Clicked(d) {\n      if (active.node() === this) {\n        return reset();\n      }\n\n      active.classed(\"active\", false);\n      active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).classed(\"active\", true);\n\n      zoom(d);\n    };\n\n    var zoom = function zoom(d) {\n      console.log(\"this is zoom\");\n\n      var bounds = path.bounds(d),\n          dx = bounds[1][0] - bounds[0][0],\n          dy = bounds[1][1] - bounds[0][1],\n          x = (bounds[0][0] + bounds[1][0]) / 2,\n          y = (bounds[0][1] + bounds[1][1]) / 2,\n          scale = .9 / Math.max(dx / vm.width, dy / vm.height),\n          translate = [vm.width / 2 - scale * x, vm.height / 2 - scale * y];\n\n      g.transition().duration(750).style(\"stroke-width\", 1.5 / scale + \"px\").attr(\"transform\", \"translate(\" + translate + \")scale(\" + scale + \")\");\n\n      // hide layer1 labels\n      gLabelLayer1.selectAll('text').transition().style(\"fill-opacity\", 0).transition().style(\"display\", \"none\");\n\n      gLayer2.selectAll(\"path\").transition().style(\"fill-opacity\", 1).style(\"display\", \"block\");\n\n      // callback to notify the specified feature is ready to receive location events\n      var featureCode = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n      // scope.onStopEvents();\n      // scope.onReceiveEvents({feature: featureCode});\n\n      vm.$emit('on-receive-events');\n      vm.$emit('on-stop-events');\n    };\n\n    function reset() {\n      active.classed(\"active\", false);\n      active = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](null);\n\n      g.transition().duration(750).style(\"stroke-width\", \"1.5px\").attr(\"transform\", \"\");\n\n      // show layer1 labels\n      gLabelLayer1.selectAll('text').transition().style(\"display\", \"block\").transition().duration(250).style(\"fill-opacity\", 1);\n\n      gLayer2.selectAll(\"path\").transition().style(\"fill-opacity\", 0).style(\"display\", \"none\");\n\n      // scope.onStopEvents();\n      vm.$emit('on-stop-events');\n    };\n    /***** click to zoom *****/\n\n    /***** hover *****/\n    var mouseoverLayer2 = function mouseoverLayer2(p) {\n      gLabelLayer2.selectAll(\"text\").filter(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(p, vm.layer2FeatureCode) == __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureCode);\n      }).transition().style(\"fill-opacity\", 1).style(\"display\", \"block\");\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n        return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n      });\n    };\n\n    var mouseoutLayer2 = function mouseoutLayer2(p) {\n      gLabelLayer2.selectAll(\"text\").filter(function (d) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(p, vm.layer2FeatureCode) == __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer2FeatureCode);\n      }).transition().style(\"fill-opacity\", 0).transition().style(\"display\", \"none\");\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n      });\n    };\n    /***** hover *****/\n  },\n\n  watch: {\n    layer1EventData: function layer1EventData(newData, oldData) {\n      // console.log(\"newData\", newData);\n      // console.log(\"oldData\", oldData);\n      this.visualizeLayer1Events(newData);\n    }\n  },\n  methods: {\n    visualizeLayer1Events: function visualizeLayer1Events(eventList) {\n      var vm = this;\n\n      var events = __WEBPACK_IMPORTED_MODULE_0_d3__[\"entries\"](eventList);\n      // console.log(\"events\", events);\n      var maxCount = __WEBPACK_IMPORTED_MODULE_0_d3__[\"max\"](events, function (d) {\n        // console.log(\"d\", d);\n        // console.log(\"vm.layer1EventCountTag\", vm.layer1EventCountTag);\n        return d.value[vm.layer1EventCountTag];\n      });\n      // console.log(\"maxCount\", maxCount);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Update the gradient for the legend ///////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var colorScale = this.getColorScale(maxCount, vm.colorRange);\n\n      var countPoints = this.getCountPoints(maxCount, vm.width, 10);\n\n      //Update the linearGradient\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#common_grads_def\").selectAll(\"linearGradient\").selectAll(\"stop\").attr(\"stop-color\", function (d, i) {\n        return colorScale(countPoints[i]);\n      });\n\n      ///////////////////////////////////////////////////////////////////////////\n      ////////////////////////// Update the legend //////////////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var xAxis = this.getXAxis(this.legendWidth, maxCount);\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#axis\").selectAll(\".tick\").remove();\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#axis\").call(xAxis);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Set the dynamic gradient for layer1 //////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      // const gLayer1 = d3.selectAll(\"#layer1\");\n\n      // edit event count  \n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1\").selectAll(\"path\").filter(function (d) {\n        if (d.type === \"Feature\") {\n          var featureCode = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode);\n          var element = eventList[featureCode];\n\n          if (!element) {\n            d[vm.layer1EventCountTag] = 1;\n            return true;\n          } else {\n            var sortValue = element[vm.layer1EventCountTag];\n            if (d[vm.layer1EventCountTag]) {\n              if (sortValue != d[vm.layer1EventCountTag]) {\n                d[vm.layer1EventCountTag] = sortValue;\n                return true;\n              }\n            } else {\n              d[vm.layer1EventCountTag] = sortValue;\n              return true;\n            }\n          }\n        }\n        return false;\n      });\n\n      // edit event count\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1_grads\").selectAll(\"radialGradient\").selectAll(\"stop\").style(\"stop-color\", function (d, i) {\n        return colorScale(d[vm.layer1EventCountTag]);\n      });\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1_hgrads\").selectAll(\"radialGradient\").selectAll(\"stop\").filter(function (d) {\n        return this.getAttribute(\"offset\") === \"100%\";\n      }).style(\"stop-color\", function (d, i) {\n        return colorScale(d[vm.layer1EventCountTag]);\n      });\n\n      __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](\"#layer1\").selectAll(\"path\").filter(function (d) {\n        return d.type === \"Feature\";\n      }).style(\"fill\", function (d, i) {\n        return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, vm.layer1FeatureCode) + \")\";\n      });\n    },\n\n\n    ///////////////////////////////////////////////////////////////////////////\n    /////////////////////// legend common functions ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    getCountScale: function getCountScale(maxCount, width) {\n      //Calculate the variables for the sort gradient\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([0, maxCount]).range([0, width]);\n    },\n    getCountPoints: function getCountPoints(maxCount, width, size) {\n      //Calculate the variables for the sort gradient\n      var countScale = this.getCountScale(maxCount, size);\n\n      //Calculate the variables for the sort gradient\n      var countRange = countScale.domain();\n      countRange[2] = countRange[1] - countRange[0];\n      var countPoints = [];\n      for (var i = 0; i < size; i++) {\n        countPoints.push(i * countRange[2] / (size - 1) + countRange[0]);\n      }\n\n      return countPoints;\n    },\n    getColorScale: function getColorScale(maxCount, colorRange) {\n\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([0, maxCount / 2, maxCount]).range(colorRange.split(\",\"));\n    },\n    getXAxis: function getXAxis(legendWidth, maxCount) {\n      var xScale = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().range([-legendWidth / 2, legendWidth / 2]).domain([0, maxCount]);\n\n      return __WEBPACK_IMPORTED_MODULE_0_d3__[\"svg\"].axis().orient(\"bottom\").ticks(5)\n      //.tickFormat(formatPercent)\n      .scale(xScale);\n    }\n  }\n\n});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_topojson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_topojson__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_findprop__ = __webpack_require__(3);\n//\n//\n//\n//\n//\n\n\n\n\n\nvar props = {\n  // data: {\n  //   type: Array,\n  //   default: () => [],\n  // },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#0d47a1,#e3f2fd'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layerObjects: {\n    type: String,\n    default: 'districts'\n  },\n  layerFeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layerFeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  featureNameStyle: {\n    type: String,\n    default: 'static'\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'd3-geo-staic',\n  // data() {\n  //   return {\n  //     data: [99, 71, 78, 25, 36, 92],\n  //     line: '',\n  //   };\n  // },\n  props: props,\n  mounted: function mounted() {\n\n    var layerObjects = this.layerObjects;\n    var colorRange = this.colorRange;\n    var layerFeatureCode = this.layerFeatureCode;\n    var layerFeatureName = this.layerFeatureName;\n    var featureNameStyle = this.featureNameStyle;\n\n    var svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this.$el).append('svg').attr('width', this.width).attr('height', this.height);\n\n    var g = svg.append('g');\n    var gLayer = g.append(\"g\").attr(\"id\", this.layerObjects);\n    var gLabelLayer = g.append(\"g\").attr(\"id\", this.layerObjects + \"_label\");\n\n    console.log(\"this.center:\", this.center);\n\n    var projection = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].mercator().center(this.center.split(\",\")).scale(this.scale).translate([this.width / 2, this.height / 2]);\n\n    var path = __WEBPACK_IMPORTED_MODULE_0_d3__[\"geo\"].path().projection(projection);\n\n    console.log(\"this.topojsonPath:\", this.topojsonPath);\n    __WEBPACK_IMPORTED_MODULE_0_d3__[\"json\"](this.topojsonPath, function (error, json) {\n      console.log(\"layerObjects:\", layerObjects);\n      var layerFeatues = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"feature\"](json, json.objects[layerObjects]).features;\n      var mesh = __WEBPACK_IMPORTED_MODULE_1_topojson__[\"mesh\"](json, json.objects[layerObjects], function (a, b) {\n        return a !== b;\n      });\n\n      var color = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scale\"].linear().domain([1, layerFeatues.length]).interpolate(__WEBPACK_IMPORTED_MODULE_0_d3__[\"interpolateHcl\"]).range(colorRange.split(\",\"));\n\n      // fill color gradient process\n      var hgrads = g.append(\"defs\").attr(\"id\", layerObjects + \"_hdef\").selectAll(\"radialGradient\").data(layerFeatues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"100%\").attr(\"id\", function (d) {\n        // return \"hgrad\" + d.id;\n        return \"hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n      });\n\n      hgrads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"white\").style(\"stop-opacity\", \"1\");\n\n      hgrads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \"1\");\n\n      var grads = g.append(\"defs\").attr(\"id\", layerObjects + \"_def\").selectAll(\"radialGradient\").data(layerFeatues).enter().append(\"radialGradient\").attr(\"gradientUnits\", \"objectBoundingBox\").attr(\"fx\", \"50%\").attr(\"fy\", \"50%\").attr(\"cx\", \"50%\").attr(\"cy\", \"50%\").attr(\"r\", \"35%\").attr(\"id\", function (d) {\n        // return \"grad\" + d.id;\n        return \"grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n      });\n\n      grads.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \".8\");\n\n      grads.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", function (d, i) {\n        return color(i + 1);\n      }).style(\"stop-opacity\", \"1\");\n\n      if (featureNameStyle == 'static') {\n        var mouseover = function mouseover(p) {\n\n          __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n            // return \"url(#hgrad\" + d.id + \")\";\n            return \"url(#hgrad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n          });\n        };\n\n        var mouseout = function mouseout(p) {\n\n          __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](this).style(\"fill\", function (d) {\n            // return \"url(#grad\" + d.id + \")\";\n            return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n          });\n        };\n\n        // polygons\n        gLayer.selectAll(\"path\").data(layerFeatues).enter().append(\"path\")\n        // .attr(\"class\", \"layer1\")\n        .attr(\"d\", path)\n        // .attr(\"fill\", function(d,i) { \n        //   return color(i + 1);\n        // })\n        .attr(\"fill\", function (d) {\n          // return \"url(#grad\" + d.id + \")\";\n          return \"url(#grad\" + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode) + \")\";\n        }).attr(\"layer-feature-code\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n        }).attr(\"layer-feature-name\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureName);\n        }).on(\"mouseover\", mouseover).on(\"mouseout\", mouseout);\n\n        // border\n        gLayer.append(\"path\").datum(mesh).attr(\"d\", path).attr(\"class\", \"layer1-boundary\");\n\n        // Layer1 labels\n        gLabelLayer.selectAll(\"text\").data(layerFeatues).enter().append(\"text\").attr(\"class\", \"label\").attr(\"pointer-events\", \"none\").attr(\"transform\", function (d) {\n          return \"translate(\" + path.centroid(d) + \")\";\n        }).attr(\"dy\", \".35em\").text(function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureName);\n        }).attr(\"layer-feature-code\", function (d) {\n          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_findprop__[\"a\" /* default */])(d, layerFeatureCode);\n        });\n      }\n    });\n  }\n});\n\n/***/ }),\n/* 12 */,\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"D3GeoDoubleLayer\", function() { return __WEBPACK_IMPORTED_MODULE_1__components_D3GeoDoubleLayer___default.a; });\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"D3GeoStatic\", function() { return __WEBPACK_IMPORTED_MODULE_0__components_D3GeoStatic___default.a; });\n\n\n\n\n\n/***/ }),\n/* 14 */,\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n/***/ })\n],[13]);\n\n\n// WEBPACK FOOTER //\n// docs/js/vue-d3-geo.594ad3e800b0085975b1.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-833fc836\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./D3GeoDoubleLayer.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./D3GeoDoubleLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-833fc836\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./D3GeoDoubleLayer.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/D3GeoDoubleLayer.vue\n// module id = 2\n// module chunks = 0","export default (obj, path) => {\n\n    var args = path.split('.'), i, l;\n\n    for (i=0, l=args.length; i<l; i++) {\n        if (!obj.hasOwnProperty(args[i]))\n            return;\n        obj = obj[args[i]];\n    }\n\n    return obj;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/findprop.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b45b0ece\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./D3GeoStatic.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./D3GeoStatic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b45b0ece\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./D3GeoStatic.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/D3GeoStatic.vue\n// module id = 7\n// module chunks = 0","<template>\n  <div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport findprop from '../utils/findprop';\n\nconst props = {\n  id: {\n    type: String,\n    required: true\n  },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#e3f2fd,#2196f3,#0d47a1'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layer1Objects: {\n    type: String,\n    default: 'districts'\n  },\n  layer2Objects: {\n    type: String,\n    default: 'blocks'\n  },\n  layer1FeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layer1FeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  layer2FeatureName: {\n    type: String,\n    default: 'properties.block'\n  },\n  layer2FeatureCode: {\n    type: String,\n    default: 'properties.block_code'\n  },\n  layer1EventData: {\n    type: Object,\n    default: null\n  },\n  layer2EventData: {\n    type: String,\n    default: 'circleData'\n  },\n  layer1EventCountTag: {\n    type: String,\n    default: 'dropoffCount'\n  },\n  layer1LegendTitle: {\n    type: String,\n    default: '３０分以内の降車イベント'\n  },\n  // onReceiveEvents: {\n  //   type: String,\n  //   default: 'subTaxiEventsFrom'\n  // },\n  // onStopEvents: {\n  //   type: String,\n  //   default: 'unsubTaxiEvents'\n  // }\n};\n\nexport default {\n  name: 'd3-geo-double-layer',\n  data() {\n    return {\n      legendWidth: 0\n    };\n  },\n  props,\n  mounted() {\n    // const width = this.width;\n    // const height = this.height;\n    // const layer1Objects = this.layer1Objects;\n    // const layer2Objects = this.layer2Objects;\n    // const colorRange = this.colorRange;\n    // const layer1FeatureCode = this.layer1FeatureCode;\n    // const layer1FeatureName = this.layer1FeatureName;\n    // const layer2FeatureCode = this.layer2FeatureCode;\n    // const layer2FeatureName = this.layer2FeatureName;\n    const layer1LegendTitle = this.layer1LegendTitle;\n    const onReceiveEvents = this.onReceiveEvents;\n    const onStopEvents = this.onStopEvents;\n    let vm = this;\n\n\n    const svg = d3.select(this.$el)\n      .append('svg')\n      .attr('width', vm.width)\n      .attr('height', vm.height);\n\n    svg.append(\"rect\")\n      .attr(\"class\", \"background\")\n      .attr(\"width\", vm.width)\n      .attr(\"height\", vm.height)\n      .on(\"click\", reset);\n\n    const g = svg.append('g');\n    const gLayer2 = g.append(\"g\").attr(\"id\", \"layer2\");\n    const gLayer1 = g.append(\"g\").attr(\"id\", \"layer1\");\n// console.log(\"gLayer1\", gLayer1);\n    // this.gLayer1 = gLayer1;\n// console.log(\"this.gLayer1\", this.gLayer1);\n    const gLabelLayer2 = g.append(\"g\").attr(\"id\", \"layer2_label\");\n    const gLabelLayer1 = g.append(\"g\").attr(\"id\", \"layer1_label\");\n\n    const projection = d3.geo.mercator()\n      .center(this.center.split(\",\"))\n      .scale(this.scale)\n      .translate([vm.width / 2, vm.height / 2]);\n\n    const path = d3.geo.path().projection(projection);\n    \n\n    ///////////////////////////////////////////////////////////////////////////\n    ///////////////// adding common static gradients //////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    const commonGrads = g.append(\"defs\").attr(\"id\", \"common_grads_def\");\n\n    const circleGrads = commonGrads\n      .append(\"radialGradient\")\n      .attr(\"gradientUnits\", \"objectBoundingBox\")\n      .attr(\"fx\", \"50%\")\n      .attr(\"fy\", \"50%\")\n      .attr(\"cx\", \"50%\")\n      .attr(\"cy\", \"50%\")\n      .attr(\"r\", \"35%\")\n      .attr(\"id\", \"circleGrad1\");\n      \n    circleGrads.append(\"stop\")\n      .attr(\"offset\", \"0%\")\n      .style(\"stop-color\",  \"white\")\n      .style(\"stop-opacity\", \"1\");\n    \n    circleGrads.append(\"stop\")\n      .attr(\"offset\", \"100%\")\n      .style(\"stop-color\",  function(d) { \n        return \"orange\";\n      })\n      .style(\"stop-opacity\", \".6\");\n\n    ///////////////////////////////////////////////////////////////////////////\n    //////////////// Adding the initial gradient for the legend ///////////////\n    ///////////////////////////////////////////////////////////////////////////\n    const countPoints = this.getCountPoints(1, vm.width, 10);\n    const countScale = this.getCountScale(1, vm.width);\n\n    //Create the linearGradient\n    commonGrads\n      .append(\"linearGradient\")\n      .attr(\"id\", \"legend-traffic\")\n      .attr(\"x1\", \"0%\").attr(\"y1\", \"0%\")\n      .attr(\"x2\", \"100%\").attr(\"y2\", \"0%\")\n      .selectAll(\"stop\") \n      .data(d3.range(10))                \n      .enter().append(\"stop\") \n      .attr(\"offset\", function(d,i) { \n        return countScale( countPoints[i] ) / vm.width;\n      })   \n      .attr(\"stop-color\", function(d,i) { \n        return vm.colorRange.split(\",\")[0]; \n      });\n\n\n\n    ///////////////////////////////////////////////////////////////////////////\n    ////////////////////////// Draw the init legend ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n\n    const gBox = g.node().getBBox();\n\n    this.legendWidth = Math.min(vm.width * 0.8, 600);\n    //Color Legend container\n    const legendsvg = g.append(\"g\")\n      .attr(\"id\", \"legendWrapper\")\n      .attr(\"transform\", \"translate(\" + (vm.width / 2) + \",\" + (vm.height * 0.95) + \")\");\n\n    //Draw the Rectangle\n    legendsvg.append(\"rect\")\n      .attr(\"id\", \"legendRect\")\n      .attr(\"x\", -this.legendWidth/2)\n      .attr(\"y\", 0)\n      .attr(\"width\", this.legendWidth)\n      .attr(\"height\", 10)\n      .style(\"fill\", \"url(#legend-traffic)\");\n      \n    //Append title\n    legendsvg.append(\"text\")\n      .attr(\"class\", \"layer1LegendTitle\")\n      .attr(\"x\", 0)\n      .attr(\"y\", -10)\n      .style(\"text-anchor\", \"middle\")\n      .text(layer1LegendTitle);\n\n    //Define x-axis\n    const xAxis = this.getXAxis(this.legendWidth, 0);\n\n    //Set up X axis\n    legendsvg.append(\"g\")\n      .attr(\"id\", \"axis\")\n      .attr(\"transform\", \"translate(0,\" + (10) + \")\")\n      .call(xAxis);\n\n    // console.log(\"this.topojsonPath:\", this.topojsonPath);\n\n    d3.json(this.topojsonPath, function (error, json) {\n\n      const layer1Featues = topojson.feature(json, json.objects[vm.layer1Objects]).features;\n      const layer2Featues = topojson.feature(json, json.objects[vm.layer2Objects]).features;\n      const meshLayer1 = topojson.mesh(json, json.objects[vm.layer1Objects], function(a, b) { return a !== b; });\n\n      const initColor = vm.colorRange.split(\",\")[0];\n\n      // fill color gradient process\n      const hgrads = g.append(\"defs\").attr(\"id\", \"layer1_hgrads\").selectAll(\"radialGradient\")\n        .data(layer1Featues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"100%\")\n        .attr(\"id\", function(d, i) { \n          \n          return \"hgrad\" + findprop(d, vm.layer1FeatureCode);\n          // return \"hgrad\" + (i + 1);\n        });\n      \n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\", \"white\")\n          .style(\"stop-opacity\", \"1\");\n\n\n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const grads = g.append(\"defs\").attr(\"id\", \"layer1_grads\").selectAll(\"radialGradient\")\n        .data(layer1Featues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"35%\")\n        .attr(\"id\", function(d, i) { \n          return \"grad\" + findprop(d, vm.layer1FeatureCode);\n          // return \"grad\" + (i + 1);\n        });\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \".7\");\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return initColor; \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const mouseoverLayer1 = function(p) {\n        d3.select(this)\n          .style(\"fill\", function(d) {\n              return \"url(#hgrad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n          });\n      }\n      \n      const mouseoutLayer1 = function (p) {\n        d3.select(this)\n          .style(\"fill\", function(d) { \n            return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n          });\n      }\n\n      // layer2 polygons and boundary\n      gLayer2.selectAll(\"path\")\n        .data(layer2Featues)\n        .enter().append(\"path\")\n        .attr(\"d\", path)\n        .attr(\"fill\", function(d, i) {\n            return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n            // return \"#bbdefb\";\n        })\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\")\n        .attr(\"layer1-feature-code\", function(d) {\n          return findprop(d, vm.layer1FeatureCode);\n        })\n        .attr(\"layer1-feature-name\", function(d) {\n          return findprop(d, vm.layer1FeatureName);\n        })\n        .attr(\"layer2-feature-code\", function(d) { \n          return findprop(d, vm.layer2FeatureCode);\n        })\n        .attr(\"layer2-feature-name\", function(d) { \n          return findprop(d, vm.layer2FeatureName);\n        })\n        .attr(\"class\", \"layer2\")\n        .on(\"click\", layer2Clicked)\n        .on(\"mouseover\", mouseoverLayer2)\n        .on(\"mouseout\", mouseoutLayer2);\n\n      // Layer2 labels\n      gLabelLayer2.selectAll(\"text\")\n        .data(layer2Featues)\n        .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\")\n        .attr(\"transform\", function(d) { \n          return \"translate(\" + path.centroid(d) + \")\"; \n        })\n        .attr(\"dy\", \".35em\")\n        .attr(\"pointer-events\", \"none\")\n        .text(function(d) { \n          return findprop(d, vm.layer2FeatureName); \n        })\n        .attr(\"layer2-feature-code\", function(d) { \n          return findprop(d, vm.layer2FeatureCode);\n        });\n\n      // Layer1 polygons\n// console.log(\"vm.gLayer1!!!!!!!!!!\", vm.gLayer1);\n      gLayer1.selectAll(\"path\")\n        .data(layer1Featues)\n        .enter().append(\"path\")\n        .attr(\"class\", \"layer1\")\n        .attr(\"d\", path)\n        .style(\"fill\", function(d, i) {\n          return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n        })\n        .attr(\"layer1-feature-code\", function(d) {\n          return findprop(d, vm.layer1FeatureCode);\n        })\n        .attr(\"layer1-feature-name\", function(d) {\n          return findprop(d, vm.layer1FeatureName);\n        })\n        .on(\"click\", layer1Clicked)\n        .on(\"mouseover\", mouseoverLayer1)\n        .on(\"mouseout\", mouseoutLayer1);\n\n      // Layer1 border\n      gLayer1.append(\"path\")\n        .datum(meshLayer1)\n        .attr(\"d\", path)\n        .attr(\"class\", \"layer1-boundary\");\n\n      // Layer1 labels\n      gLabelLayer1.selectAll(\"text\")\n        .data(layer1Featues)\n        .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"transform\", function(d) { \n          return \"translate(\" + path.centroid(d) + \")\"; \n        })\n        .attr(\"dy\", \".35em\")\n        .attr(\"pointer-events\", \"none\")\n        .text(function(d) { \n          return findprop(d, vm.layer1FeatureName); \n        })\n        .attr(\"layer1-feature-code\", function(d) { \n          return findprop(d, vm.layer1FeatureCode);\n        });\n\n    });\n\n    /***** click to zoom *****/\n    var active = d3.select(null);\n\n    const layer2Clicked = function(d) {\n      if (active.node()) {\n        if (this.getAttribute(\"layer1-feature-code\") == active.node().getAttribute(\"layer1-feature-code\")) {\n          return reset();\n        }\n      }\n    }\n\n    const layer1Clicked = function(d) {\n      if (active.node() === this) {\n        return reset();\n      }\n\n      active.classed(\"active\", false);\n      active = d3.select(this).classed(\"active\", true);\n\n      zoom(d);\n    };\n\n\n    const zoom = function(d) {\n      console.log(\"this is zoom\");\n\n      const bounds = path.bounds(d),\n          dx = bounds[1][0] - bounds[0][0],\n          dy = bounds[1][1] - bounds[0][1],\n          x = (bounds[0][0] + bounds[1][0]) / 2,\n          y = (bounds[0][1] + bounds[1][1]) / 2,\n          scale = .9 / Math.max(dx / vm.width, dy / vm.height),\n          translate = [vm.width / 2 - scale * x, vm.height / 2 - scale * y];\n\n      g.transition()\n        .duration(750)\n        .style(\"stroke-width\", 1.5 / scale + \"px\")\n        .attr(\"transform\", \"translate(\" + translate + \")scale(\" + scale + \")\");\n\n      // hide layer1 labels\n      gLabelLayer1.selectAll('text')\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .transition()\n        .style(\"display\", \"none\");\n\n\n      gLayer2.selectAll(\"path\")\n        .transition()\n        .style(\"fill-opacity\", 1)\n        .style(\"display\", \"block\");\n\n\n      // callback to notify the specified feature is ready to receive location events\n      const featureCode = findprop(d, vm.layer1FeatureCode);\n      // scope.onStopEvents();\n      // scope.onReceiveEvents({feature: featureCode});\n\n      vm.$emit('on-receive-events');\n      vm.$emit('on-stop-events');\n    }\n\n    function reset() {\n      active.classed(\"active\", false);\n      active = d3.select(null);\n\n      g.transition()\n        .duration(750)\n        .style(\"stroke-width\", \"1.5px\")\n        .attr(\"transform\", \"\");\n\n      // show layer1 labels\n      gLabelLayer1.selectAll('text')\n        .transition()\n        .style(\"display\", \"block\")\n        .transition()\n        .duration(250)\n        .style(\"fill-opacity\", 1);\n\n      gLayer2.selectAll(\"path\")\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .style(\"display\", \"none\");\n\n      // scope.onStopEvents();\n      vm.$emit('on-stop-events');\n    };\n    /***** click to zoom *****/\n\n    /***** hover *****/\n    const mouseoverLayer2 = function(p) {\n      gLabelLayer2.selectAll(\"text\")\n        .filter(function(d){\n          return findprop(p, vm.layer2FeatureCode) == findprop(d, vm.layer2FeatureCode);\n        })\n        .transition()\n        .style(\"fill-opacity\", 1)\n        .style(\"display\", \"block\");\n\n      d3.select(this)\n        .style(\"fill\", function(d) {\n            return \"url(#hgrad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n        });\n    }\n    \n    const mouseoutLayer2 = function (p) {\n      gLabelLayer2.selectAll(\"text\")\n        .filter(function(d){\n          return findprop(p, vm.layer2FeatureCode) == findprop(d, vm.layer2FeatureCode);\n        })\n        .transition()\n        .style(\"fill-opacity\", 0)\n        .transition()\n        .style(\"display\", \"none\");\n\n      d3.select(this)\n        .style(\"fill\", function(d) {\n            return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n        });\n    }\n    /***** hover *****/\n  },\n  watch: {\n    layer1EventData: function(newData, oldData) {\n      // console.log(\"newData\", newData);\n      // console.log(\"oldData\", oldData);\n      this.visualizeLayer1Events(newData);\n    }\n  },\n  methods: {\n\n    visualizeLayer1Events(eventList) {\n      let vm = this;\n\n      var events = d3.entries(eventList);\n// console.log(\"events\", events);\n      var maxCount = d3.max(events, function(d) {\n        // console.log(\"d\", d);\n        // console.log(\"vm.layer1EventCountTag\", vm.layer1EventCountTag);\n        return d.value[vm.layer1EventCountTag]; \n      });\n// console.log(\"maxCount\", maxCount);\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Update the gradient for the legend ///////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var colorScale = this.getColorScale(maxCount, vm.colorRange);\n\n      var countPoints = this.getCountPoints(maxCount, vm.width, 10);\n\n      //Update the linearGradient\n      d3.select(\"#common_grads_def\")\n        .selectAll(\"linearGradient\")\n        .selectAll(\"stop\")\n        .attr(\"stop-color\",  function(d, i) { \n          return colorScale(countPoints[i]); \n        });\n\n      ///////////////////////////////////////////////////////////////////////////\n      ////////////////////////// Update the legend //////////////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      var xAxis = this.getXAxis(this.legendWidth, maxCount);\n\n      d3.select(\"#axis\")\n        .selectAll(\".tick\")\n        .remove();\n\n      d3.select(\"#axis\")\n        .call(xAxis);\n\n\n      ///////////////////////////////////////////////////////////////////////////\n      //////////////// Set the dynamic gradient for layer1 //////////////////////\n      ///////////////////////////////////////////////////////////////////////////\n      // const gLayer1 = d3.selectAll(\"#layer1\");\n\n      // edit event count  \n      d3.select(\"#layer1\").selectAll(\"path\")\n        .filter(function(d){\n          if (d.type === \"Feature\") {\n            var featureCode = findprop(d, vm.layer1FeatureCode);\n            var element = eventList[featureCode];\n            \n            if (!element) {\n              d[vm.layer1EventCountTag] = 1;\n              return true;\n            } \n            else {\n              var sortValue = element[vm.layer1EventCountTag];\n              if (d[vm.layer1EventCountTag]) {\n                if (sortValue != d[vm.layer1EventCountTag]) {\n                  d[vm.layer1EventCountTag] = sortValue;\n                  return true;\n                }\n              } \n              else {\n                d[vm.layer1EventCountTag] = sortValue;\n                return true;\n              }                    \n            }\n          }\n          return false;\n        });\n\n      // edit event count\n      d3.select(\"#layer1_grads\")\n        .selectAll(\"radialGradient\")\n        .selectAll(\"stop\")\n        .style(\"stop-color\",  function(d, i) { \n          return colorScale(d[vm.layer1EventCountTag]); \n        });\n\n      d3.select(\"#layer1_hgrads\")\n        .selectAll(\"radialGradient\")\n        .selectAll(\"stop\")\n        .filter(function(d){\n            return this.getAttribute(\"offset\") === \"100%\"\n        })\n        .style(\"stop-color\",  function(d, i) { \n          return colorScale(d[vm.layer1EventCountTag]); \n        });\n\n      d3.select(\"#layer1\").selectAll(\"path\")\n        .filter(function(d){\n          return d.type === \"Feature\"\n        })\n        .style(\"fill\", function(d, i) {\n          return \"url(#grad\" + findprop(d, vm.layer1FeatureCode) + \")\";\n        });\n    },\n  \n    ///////////////////////////////////////////////////////////////////////////\n    /////////////////////// legend common functions ///////////////////////////\n    ///////////////////////////////////////////////////////////////////////////\n    getCountScale(maxCount, width) {\n      //Calculate the variables for the sort gradient\n      return d3.scale.linear()\n        .domain([0, maxCount])\n        .range([0, width]);\n    },\n    getCountPoints(maxCount, width, size) {\n      //Calculate the variables for the sort gradient\n      const countScale = this.getCountScale(maxCount, size);\n\n      //Calculate the variables for the sort gradient\n      const countRange = countScale.domain();\n      countRange[2] = countRange[1] - countRange[0];\n      const countPoints = [];\n      for(var i = 0; i < size; i++) {\n        countPoints.push(i * countRange[2]/(size-1) + countRange[0]);\n      }\n\n      return countPoints;\n    },\n    getColorScale(maxCount, colorRange) {\n\n      return d3.scale.linear()\n        .domain([0, maxCount/2, maxCount])\n        .range(colorRange.split(\",\"));\n    },\n    getXAxis(legendWidth, maxCount) {\n      const xScale = d3.scale.linear()\n       .range([-legendWidth/2, legendWidth/2])\n       .domain([ 0, maxCount　] );\n\n      return d3.svg.axis().orient(\"bottom\")\n              .ticks(5)\n              //.tickFormat(formatPercent)\n              .scale(xScale);\n    }\n  }\n\n};\n</script>\n\n<style>\n@import url(//fonts.googleapis.com/earlyaccess/notosansjapanese.css);\n\nsvg {\n  font-size: 11px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 300;\n  margin: auto;\n  display: block;\n}\n\n.background {\n  fill: none;\n  pointer-events: all;\n}\n\n.circle {\n}\n\n.layer1 {\n  cursor: pointer;\n}\n\n\n.layer1:hover {\n  fill: orange;\n}\n\n.layer1.active {\n  display:none;\n}\n\n.layer1-boundary {\n  fill: none;\n  stroke: white;\n  stroke-dasharray: 2,2;\n  stroke-linejoin: round;\n  stroke-width: 1;\n}\n\n.layer1LegendTitle {\n  fill: black;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n}\n\n.layer2 {\n  stroke: white;\n  stroke-width: 0.2;\n}\n\n.label {\n  fill: white;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n  text-shadow:\n    2px 2px 0 #000,\n    -1px -1px 0 #000,  \n    1px -1px 0 #000,\n    -1px 1px 0 #000,\n     1px 1px 0 #000;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// D3GeoDoubleLayer.vue?320cb264","<template>\n  <div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport findprop from '../utils/findprop';\n\nconst props = {\n  // data: {\n  //   type: Array,\n  //   default: () => [],\n  // },\n  topojsonPath: {\n    type: String\n  },\n  width: {\n    type: Number,\n    default: 1000\n  },\n  height: {\n    type: Number,\n    default: 1000\n  },\n  colorRange: {\n    type: String,\n    default: '#0d47a1,#e3f2fd'\n  },\n  center: {\n    type: String,\n    default: '139.752268, 35.677043'\n  },\n  scale: {\n    type: Number,\n    default: 110000\n  },\n  layerObjects: {\n    type: String,\n    default: 'districts'\n  },\n  layerFeatureName: {\n    type: String,\n    default: 'properties.district'\n  },\n  layerFeatureCode: {\n    type: String,\n    default: 'properties.district_code'\n  },\n  featureNameStyle: {\n    type: String,\n    default: 'static'\n  }\n};\n\nexport default {\n  name: 'd3-geo-staic',\n  // data() {\n  //   return {\n  //     data: [99, 71, 78, 25, 36, 92],\n  //     line: '',\n  //   };\n  // },\n  props,\n  mounted() {\n\n    const layerObjects = this.layerObjects;\n    const colorRange = this.colorRange;\n    const layerFeatureCode = this.layerFeatureCode;\n    const layerFeatureName = this.layerFeatureName;\n    const featureNameStyle = this.featureNameStyle;\n\n    const svg = d3.select(this.$el)\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height);\n\n    const g = svg.append('g');\n    const gLayer = g.append(\"g\").attr(\"id\", this.layerObjects);\n    const gLabelLayer = g.append(\"g\").attr(\"id\", this.layerObjects + \"_label\");\n\n    console.log(\"this.center:\", this.center);\n\n    const projection = d3.geo.mercator()\n      .center(this.center.split(\",\"))\n      .scale(this.scale)\n      .translate([this.width / 2, this.height / 2]);\n\n    const path = d3.geo.path().projection(projection);\n    \n\n    \n    \n\n    console.log(\"this.topojsonPath:\", this.topojsonPath);\n    d3.json(this.topojsonPath, function (error, json) {\n      console.log(\"layerObjects:\", layerObjects);\n      const layerFeatues = topojson.feature(json, json.objects[layerObjects]).features;\n      const mesh = topojson.mesh(json, json.objects[layerObjects], function(a, b) { return a !== b; });\n\n      const color = d3.scale.linear().domain([1,layerFeatues.length])\n                    .interpolate(d3.interpolateHcl)\n                    .range(colorRange.split(\",\"));\n\n      // fill color gradient process\n      const hgrads = g.append(\"defs\").attr(\"id\", layerObjects + \"_hdef\").selectAll(\"radialGradient\")\n        .data(layerFeatues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"100%\")\n        .attr(\"id\", function(d) { \n          // return \"hgrad\" + d.id;\n          return \"hgrad\" + findprop(d, layerFeatureCode);\n        });\n      \n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\", \"white\")\n          .style(\"stop-opacity\", \"1\");\n\n\n      hgrads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      const grads = g.append(\"defs\").attr(\"id\", layerObjects + \"_def\").selectAll(\"radialGradient\")\n        .data(layerFeatues)\n        .enter()\n        .append(\"radialGradient\")\n        .attr(\"gradientUnits\", \"objectBoundingBox\")\n        .attr(\"fx\", \"50%\")\n        .attr(\"fy\", \"50%\")\n        .attr(\"cx\", \"50%\")\n        .attr(\"cy\", \"50%\")\n        .attr(\"r\", \"35%\")\n        .attr(\"id\", function(d) { \n          // return \"grad\" + d.id;\n          return \"grad\" + findprop(d, layerFeatureCode);\n        });\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"0%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \".8\");\n\n      grads.append(\"stop\")\n          .attr(\"offset\", \"100%\")\n          .style(\"stop-color\",  function(d, i) { \n            return color(i + 1); \n          })\n          .style(\"stop-opacity\", \"1\");\n\n      if (featureNameStyle == 'static') {\n        var mouseover = function(p) {\n\n          d3.select(this)\n            .style(\"fill\", function(d) {\n                // return \"url(#hgrad\" + d.id + \")\";\n                return \"url(#hgrad\" + findprop(d, layerFeatureCode) + \")\";\n            });\n\n        }\n        \n        var mouseout = function (p) {\n\n          d3.select(this)\n            .style(\"fill\", function(d) { \n              // return \"url(#grad\" + d.id + \")\";\n              return \"url(#grad\" + findprop(d, layerFeatureCode) + \")\";\n            });\n        }\n\n        // polygons\n        gLayer.selectAll(\"path\")\n          .data(layerFeatues)\n          .enter().append(\"path\")\n          // .attr(\"class\", \"layer1\")\n          .attr(\"d\", path)\n          // .attr(\"fill\", function(d,i) { \n          //   return color(i + 1);\n          // })\n          .attr(\"fill\", function(d) {\n              // return \"url(#grad\" + d.id + \")\";\n              return \"url(#grad\" + findprop(d, layerFeatureCode) + \")\";\n          })\n          .attr(\"layer-feature-code\", function(d) {\n            return findprop(d, layerFeatureCode);\n          })\n          .attr(\"layer-feature-name\", function(d) {\n            return findprop(d, layerFeatureName);\n          })\n          .on(\"mouseover\", mouseover)\n          .on(\"mouseout\", mouseout);\n\n        // border\n        gLayer.append(\"path\")\n          .datum(mesh)\n          .attr(\"d\", path)\n          .attr(\"class\", \"layer1-boundary\");\n\n        // Layer1 labels\n        gLabelLayer.selectAll(\"text\")\n          .data(layerFeatues)\n          .enter().append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"pointer-events\", \"none\")\n          .attr(\"transform\", function(d) { \n            return \"translate(\" + path.centroid(d) + \")\"; \n          })\n          .attr(\"dy\", \".35em\")\n          .text(function(d) { \n            return findprop(d, layerFeatureName); \n          })\n          .attr(\"layer-feature-code\", function(d) { \n            return findprop(d, layerFeatureCode);\n          });\n\n      } \n\n    });\n\n  }\n};\n</script>\n\n\n\n<style>\n@import url(//fonts.googleapis.com/earlyaccess/notosansjapanese.css);\n\nsvg {\n  font-size: 11px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 300;\n  margin: auto;\n  display: block;\n}\n\n.background {\n  fill: none;\n  pointer-events: all;\n}\n\n.circle {\n}\n\n.layer1 {\n  cursor: pointer;\n}\n\n\n.layer1:hover {\n  fill: orange;\n}\n\n.layer1.active {\n  display:none;\n}\n\n.layer1-boundary {\n  fill: none;\n  stroke: white;\n  stroke-dasharray: 2,2;\n  stroke-linejoin: round;\n  stroke-width: 1;\n}\n\n.layer1LegendTitle {\n  fill: black;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n}\n\n.layer2 {\n  stroke: white;\n  stroke-width: 0.2;\n}\n\n.label {\n  fill: white;\n  fill-opacity: 1;\n  font-size: 18px;\n  font-family: 'Noto Sans Japanese', 'Klee', 'Meiryo';\n  font-weight: 700;\n  text-anchor: middle;\n  text-shadow:\n    2px 2px 0 #000,\n    -1px -1px 0 #000,  \n    1px -1px 0 #000,\n    -1px 1px 0 #000,\n     1px 1px 0 #000;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// D3GeoStatic.vue?765f993a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-833fc836\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/D3GeoDoubleLayer.vue\n// module id = 21\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div')\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b45b0ece\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/D3GeoStatic.vue\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}